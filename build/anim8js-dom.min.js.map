{"version":3,"sources":["anim8js-dom.min.js"],"names":["root","factory","define","amd","anim8","module","exports","require","global","this","window","override","target","source","prop","isElement","x","HTMLElement","nodeType","nodeName","unset","e","anim","attr","property","css","clearedValue","style","frame","set","styles","$attribute","isObject","isDefined","defaultValue","isString","Attributes","nm","relativeTo","get","animating","$style","converted","$convert","units","value","factoryDerivable","deriver","isFunction","factoryColor","parsed","Color","parse","format","factoryNumberAttribute","parseFloat","isFinite","attrs","$property","Properties","AnimatorDom","subject","reset","properties","FastMap","propertiesPreset","attributeToProperty","cached","attributes","styled","stylesUpdated","FactoryDom","ids","elementAttribute","priority","concatenateStyle","setProperty","attribute","propertyName","Animator","Factory","Class","Easings","EasingTypes","isNumber","isBoolean","coalesce","clamp","toArray","$calculator","calculator","document","hyphenated","hyphenize","str","key","replace","letter","toLowerCase","currentStyle","defaultView","getComputedStyle","getPropertyValue","$prefix","a","createElement","prefixes","i","length","$parseValue","regex","exec","unit","toPixels","baseValue","baseUnit","defaultRate","body","div","appendChild","width","pixels","offsetWidth","removeChild","getFontSize","notUnit","fontSize","getConverterScale","conversions","px","variables","parentWidth","parentNode","scrollWidth","parentHeight","scrollHeight","height","offsetHeight","parentFontSize","htmlFontSize","htmlElement","getElementsByTagName","rad","Math","PI","to","given","converter","from","toUnit","fromUnit","converter1","converter2","combined","ease","quad","out","inout","linear","padding","defaultUnit","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","outlineWidth","outlineOffset","textIndent","tabSize","borderSpacing","lineHeight","letterSpacing","wordSpacing","origin","y","originX","originY","opacity","zIndex","minWidth","maxWidth","minHeight","maxHeight","angle","distance","orbitOffset","top","right","bottom","left","center","centerX","centerY","blur","sepia","brightness","grayscale","contrast","invert","saturation","hueRotate","rotate","rotate3d","z","translate","translateX","translateY","translateZ","translate3d","scale","scaleX","scaleY","scaleZ","scale3d","skew","skewX","skewY","backface","visibility","backgroundColor","color","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderColor","outlineColor","textDecorationColor","textShadowX","textShadowY","textShadowPosition","textShadowBlur","textShadowColor","shadowX","shadowY","shadowPosition","shadowBlur","shadowSpread","shadowColor","shadowInset","scrollTop","scrollLeft","noop","offsetTop","offsetLeft","floor","transformOrigin","keywords","setOriginAttribute","setOrigin","split","originZ","valueOr","transform","desiredUnit","getAttribute","getter1d","getter2d","getter3d","getter4d","setter1d","setter2d","setter3d","setter4d","combine","ax","ay","bx","by","ascl","bscl","place1d","place2d","valueX","valueY","relativeToX","relativeToY","place3d","valueZ","relativeToZ","place4d","valueRotate","relativeToRotate","regexes","rotateX","rotateY","rotateZ","matrix","getters","setters","props","values","keys","indexOf","matrixParsed","b","c","d","tx","ty","sqrt","atan2","transforms","push","join","isNaN","shadow","parsePart","updating","parts","inset","shift","spread","parsedX","parsedY","textShadow","textShadowSpread","filter","methods","saturate","patterns","RegExp","filters","cx","cy","ccx","ccy","preset","rw","rh","updated","orbit","DEGREE_TO_RADIAN","RADIAN_TO_DEGREE","ox","oy","dx","dy","cunit","cox","coy","orbitX","orbitY","originUnit","cos","sin","extend","preupdate","now","aa","attrimatorsAdded","attrimator","hasComputed","setDefault","start","presets","trigger","update","_update","getStyles","apply","trimAttrimators","placeAttrimator","_placeAttrimator","put","input","restore","attrimators","remove","flash","other","subproperty","applyProperties","has","cloneDefault","ref","animator","request","current","tweenTo","options","cache","convertExisting","_tweenTo","tweenManyTo","targets","convertExistingMany","_tweenManyTo","tweenFrom","starting","_tweenFrom","tweenManyFrom","startings","_tweenManyFrom","tween","starts","ends","_tween","tweenMany","_tweenMany","move","amount","_move","moveMany","amounts","_moveMany","follow","path","_follow","is","animatorFor","animatorId","setAttribute","id","destroy","calculatorName","ZERO","name","ignoreRelative","clone","browser","IE","all","compatMode","XMLHttpRequest","querySelector","addEventListener","atob","Matrix","identity","m11","m12","m21","m22","multiply","radians","tan","adjustment","w","h","x0","x1","x2","xmin","min","xmax","max","y0","y1","y2","ymin","ymax","ieTransform","presettings","savedAs","defaultProperty","skew2dX","skew2dY","translate2dX","translate3dX","translate2dY","translate3dY","scale2dX","scale3dX","scale2dY","scale3dY","origin2dX","origin2dY","settings","getFramed","def","resolveRelativeTo","cacheConverted","canConvert","valueUnit","actualValue","united","cacheValue","hasValue","cacheDimension","computedValue","cachedOrDefault","baseMarginLeft","margins","baseMarginTop","anchorX","anchorY","newSize","hw","hh","transformFilter","opacityFilter","blurFilter","zoom","Factories","dom","convert","parseValue","prefix"],"mappings":"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","file":"anim8js-dom.min.js","sourcesContent":["/* anim8js-dom 1.0.2 - anim8 your HTML elements by Philip Diffenderfer */\n// UMD (Universal Module Definition)\n(function (root, factory)\n{\n  if (typeof define === 'function' && define.amd) // jshint ignore:line\n  {\n    // AMD. Register as an anonymous module.\n    define(['anim8'], function(anim8) { // jshint ignore:line\n      return factory(anim8, root);\n    });\n  }\n  else if (typeof module === 'object' && module.exports)  // jshint ignore:line\n  {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('anim8'), global);  // jshint ignore:line\n  }\n  else\n  {\n    // Browser globals (root is window)\n    factory(root.anim8, root);\n  }\n}(this, function(anim8, window)\n{\n\n  var FastMap = anim8.FastMap;\n  var Animator = anim8.Animator;\n  var Factory = anim8.Factory;\n  var Class = anim8.Class;\n  var Color = anim8.Color;\n  var Easings = anim8.Easings;\n  var EasingTypes = anim8.EasingTypes;\n  var isFunction = anim8.isFunction;\n  var isString = anim8.isString;\n  var isNumber = anim8.isNumber;\n  var isDefined = anim8.isDefined;\n  var isObject = anim8.isObject;\n  var isBoolean = anim8.isBoolean;\n  var coalesce = anim8.coalesce;\n  var clamp = anim8.clamp;\n  var toArray = anim8.toArray;\n\n  var $calculator = anim8.calculator;\n\n  var HTMLElement = window.HTMLElement;\n  var document = window.document;\n\n  function override(target, source)\n  {\n    for (var prop in source)\n    {\n      target[ prop ] = source[ prop ];\n    }\n  }\n\n\n/**\n * Returns true if the given variable is an HTML element.\n *\n * @method anim8.isElement\n * @param {Any} x\n * @return {Boolean}\n */\nfunction isElement(x)\n{\n  return typeof HTMLElement === \"object\" ? x instanceof HTMLElement :\n  x && typeof x === \"object\" && x !== null && x.nodeType === 1 && typeof x.nodeName === \"string\";\n}\n\n\nfunction unset( e, anim, attr, property, css, clearedValue )\n{\n  if ( attr === true )\n  {\n    e.style[ css ] = clearedValue;\n  }\n  else\n  {\n    delete anim.frame[ attr ];\n\n    property.set( e, anim );\n\n    e.style[ css ] = anim.styles[ css ];\n  }\n}\n\n\n/**\n * Computes the desired style of the given element and returns it as a string.\n * The style given must be in hyphenated format like so:\n * anim8.dom.style( element, 'font-size' ) = '12px'\n *\n * @param {HTMLElement} e\n * @param {String} style\n * @return {String}\n */\nvar $style = (function()\n{\n  var hyphenated = {};\n\n  var hyphenize = function(str)\n  {\n    if ( str in hyphenated )\n    {\n      return hyphenated[ str ];\n    }\n\n    var key = str;\n\n    str = str.replace(/[a-z][A-Z]/g, function(str, letter)\n    {\n     return str[0] + '-' + str[1].toLowerCase();\n    });\n\n    str = str.replace(/^Webkit/, '-webkit');\n    str = str.replace(/^Moz/, '-moz');\n    str = str.replace(/^Ms/, '-ms');\n    str = str.replace(/^O/, '-o');\n    str = str.replace(/^Khtml/, '-khtml');\n\n    hyphenated[ key ] = str;\n\n    return str;\n  };\n\n  return function(e, style)\n  {\n    if (e.currentStyle)\n    {\n      return e.currentStyle[ style ];\n    }\n    else if (document.defaultView && document.defaultView.getComputedStyle)\n    {\n      return document.defaultView.getComputedStyle( e, null ).getPropertyValue( hyphenize( style ) );\n    }\n    else\n    {\n      return e.style[ style ];\n    }\n  };\n\n})();\n\n/**\n * Given an array of styles this will return the first one that is present on elements in the current browser.\n *\n * @param {Array} prefixes\n * @return {String|false}\n */\nvar $prefix = (function()\n{\n  var a = document.createElement('a');\n\n  return function(prefixes)\n  {\n    for (var i = 0; i < prefixes.length; i++)\n    {\n      if ( isDefined( a.style[ prefixes[ i ] ] ) )\n      {\n        return prefixes[i];\n      }\n    }\n    return false;\n  };\n\n})();\n\n/**\n * Parses the string for a value and a unit.\n *\n * @param {String} value\n * @return {Object|false}\n */\nvar $parseValue = (function()\n{\n  var regex = /(-?\\d*(\\.\\d+)|-?\\d+)(px|em|%|vw|ex|cm|mm|in|pt|pc|deg|rad)?/;\n\n  return function(x)\n  {\n    var parsed = regex.exec( x );\n\n    if (parsed)\n    {\n      return {\n        value: parseFloat( parsed[1] ),\n        unit: parsed[3]\n      };\n    }\n\n    return false;\n  };\n})();\n\n\n/**\n * Converts one unit to another for a given element.\n *\n * For Example: anim8.dom.convert( element, '100px', '%', 'parentWidth' )\n *    returns how much percent 100px relativeTo parentWidth of the given element\n *\n * @param {HTMLElement} e\n * @param {String} from\n * @param {String} toUnit\n * @param {String|Number} relativeTo\n * @return {Number|false}\n */\nvar $convert = (function()\n{\n  /**\n   * Calculators how many pixels a given value & unit is.\n   *\n   * For Example: anim8.toPixels( 100, 'in' )\n   *    returns how many pixels are in 1 inch, with up to 2 decimal points of accuracy.\n   */\n  var toPixels = function(baseValue, baseUnit, defaultRate)\n  {\n    if ( document.body )\n    {\n      try\n      {\n        var div = document.createElement('div');\n        document.body.appendChild( div );\n        div.style.width = baseValue + baseUnit;\n        var pixels = (div.offsetWidth / baseValue);\n        document.body.removeChild( div );\n\n        return pixels || defaultRate;\n      }\n      catch (e)\n      {\n        // Do nothing\n      }\n    }\n\n    return defaultRate;\n  };\n\n  var getFontSize = function(e, notUnit, relativeTo)\n  {\n    var fontSize = $style( e, 'fontSize' );\n    var parsed = $parseValue( fontSize );\n\n    if ( !parsed || parsed.unit === notUnit )\n    {\n      return 12;\n    }\n\n    if ( parsed.unit === 'px' )\n    {\n      return parsed.value;\n    }\n\n    return getConverterScale( e, conversions[ parsed.unit ].px, relativeTo );\n  };\n\n  var variables = {};\n\n  variables.parentWidth = function(e)\n  {\n    return e.parentNode.scrollWidth;\n  };\n  variables.parentHeight = function(e)\n  {\n    return e.parentNode.scrollHeight;\n  };\n  variables.width = function(e)\n  {\n    return e.offsetWidth;\n  };\n  variables.height = function(e)\n  {\n    return e.offsetHeight;\n  };\n  variables.fontSize = function(e)\n  {\n    return getFontSize( e, '%' );\n  };\n  variables.parentFontSize = function(e)\n  {\n    return getFontSize( e.parentNode, '%' );\n  };\n  variables.htmlFontSize = function(e)\n  {\n    var htmlElement = document.getElementsByTagName(\"html\")[0];\n\n    return getFontSize( htmlElement, '%' );\n  };\n\n  var conversions = {};\n\n  conversions['pt']  = { px: toPixels( 100, 'pt', 1 ) };\n  conversions['in']  = { px: toPixels( 100, 'in', 72 ) };\n  conversions['cm']  = { px: toPixels( 1000, 'cm', 72 / 2.54 ) };\n  conversions['mm']  = { px: toPixels( 100000, 'mm', 72 / 25.4 ) };\n  conversions['vw']  = { px: toPixels( 1000, 'vw', 1024 * 0.01 ) };\n  conversions['deg'] = { rad: Math.PI / 180.0 };\n\n  conversions['em'] =\n  {\n    px: function(e, relativeTo)\n    {\n      return getFontSize( e, 'em', relativeTo );\n    }\n  };\n\n  conversions['rem'] =\n  {\n    px: function(e, relativeTo)\n    {\n      var htmlElement = document.getElementsByTagName(\"html\")[0];\n\n      return getFontSize( htmlElement, 'rem', relativeTo );\n    }\n  };\n\n  conversions['%'] =\n  {\n    px: function(e, relativeTo)\n    {\n      if ( isNumber( relativeTo ) )\n      {\n        return relativeTo;\n      }\n      if ( relativeTo in variables )\n      {\n        return variables[ relativeTo ]( e ) * 0.01;\n      }\n\n      return 1.0;\n    }\n  };\n\n  // Populate conversions going other way.\n  for (var unit in conversions)\n  {\n    for (var to in conversions[ unit ])\n    {\n      if ( !(to in conversions) )\n      {\n        conversions[ to ] = {};\n      }\n\n      if ( !(unit in conversions[ to ]) )\n      {\n        var given = conversions[ unit ][ to ];\n\n        if ( isNumber( given ) )\n        {\n          conversions[ to ][ unit ] = 1.0 / given;\n        }\n        if ( isFunction( given ) )\n        {\n          conversions[ to ][ unit ] = (function(converter)\n          {\n            return function(e, relativeTo)\n            {\n              return 1.0 / converter( e, relativeTo );\n            };\n          })( given );\n        }\n      }\n    }\n  }\n\n  // Given an element, convert, and relativeTo - return the number we need to multiply by.\n  var getConverterScale = function(e, converter, relativeTo)\n  {\n    if ( isNumber( converter ) )\n    {\n      return converter;\n    }\n    else if ( isFunction( converter ) )\n    {\n      return converter( e, relativeTo );\n    }\n\n    return 1.0;\n  };\n\n  return function(e, from, toUnit, relativeTo)\n  {\n    if ( isNumber( from ) )\n    {\n      return from;\n    }\n\n    var parsed = $parseValue( from );\n\n    if ( !parsed )\n    {\n      return false;\n    }\n\n    var value = parsed.value;\n    var fromUnit = parsed.unit;\n\n    if ( !fromUnit || fromUnit === toUnit )\n    {\n      return value;\n    }\n\n    // First see if we have a direct conversion available...\n    if ( fromUnit in conversions && toUnit in conversions[ fromUnit ] )\n    {\n      var converter = conversions[ fromUnit ][ toUnit ];\n\n      value *= getConverterScale( e, converter, relativeTo );\n    }\n    // Otherwise convert it to px, then to the desired unit\n    else if ( fromUnit in conversions && conversions[ fromUnit ].px && toUnit in conversions.px )\n    {\n      var converter1 = conversions[ fromUnit ].px;\n      var converter2 = conversions.px[ toUnit ];\n\n      var combined = getConverterScale( e, converter1, relativeTo ) *\n                     getConverterScale( e, converter2, relativeTo );\n\n      value *= combined;\n    }\n\n    return value;\n  };\n\n})();\n\n\n/**\n * Easings equivalent to the CSS animations. These are approximations since the\n * exact functions are not performant enough.\n */\n\nEasings['cssEase']      = Easings.ease;\n\nEasings['cssEaseIn']    = Easings.quad;\n\nEasings['cssEaseOut']   = EasingTypes.out( Easings.quad );\n\nEasings['cssEaseInOut'] = EasingTypes.inout( Easings.quad );\n\nEasings['cssLinear']    = Easings.linear;\n\n\nvar Attributes = {};\n\n/**\n * The default attribute.\n */\nAttributes['default']              = {defaultValue: 0};\n\n/**\n * All animatable attributes for AnimatorDoms & HTMLElements.\n */\n\nAttributes.padding                 = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingTop              = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingRight            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingBottom           = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingLeft             = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.margin                  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginTop               = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginRight             = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginBottom            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginLeft              = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.borderRadius            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderTopLeftRadius     = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderTopRightRadius    = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderBottomLeftRadius  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderBottomRightRadius = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.borderWidth             = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderTopWidth          = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderRightWidth        = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderBottomWidth       = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderLeftWidth         = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.outlineWidth            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.outlineOffset           = {defaultValue: 0};\nAttributes.textIndent              = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.tabSize                 = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderSpacing           = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.fontSize                = {defaultValue: 1, defaultUnit: 'em'};\nAttributes.lineHeight              = {defaultValue: 1, defaultUnit: 'em'};\nAttributes.letterSpacing           = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.wordSpacing             = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.origin                  = {defaultValue: {x:50, y:50}, defaultUnit: '%', property: 'transformOrigin', calculator: '2d'};\nAttributes.originX                 = {defaultValue: 50, defaultUnit: '%', property: 'transformOrigin'};\nAttributes.originY                 = {defaultValue: 50, defaultUnit: '%', property: 'transformOrigin'};\n\nAttributes.opacity                 = {defaultValue: 1};\nAttributes.zIndex                  = {defaultValue: 1};\n\nAttributes.width                   = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.minWidth                = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.maxWidth                = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.height                  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.minHeight               = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.maxHeight               = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.angle                   = {defaultValue: 0, property: 'orbit', defaultUnit: 'deg'};\nAttributes.distance                = {defaultValue: 0, property: 'orbit', defaultUnit: 'px'};\nAttributes.orbitOffset             = {defaultValue: {x:50, y:50}, defaultUnit: '%', property: 'orbitOffset', calculator: '2d'};\n\nAttributes.top                     = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.right                   = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.bottom                  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.left                    = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.center                  = {defaultValue: {x:0, y:0}, defaultUnit: 'px', property: 'center', calculator: '2d'};\nAttributes.centerX                 = {defaultValue: 0, defaultUnit: 'px', property: 'center'};\nAttributes.centerY                 = {defaultValue: 0, defaultUnit: 'px', property: 'center'};\n\nAttributes.blur                    = {defaultValue: 0, property: 'filter', defaultUnit: 'px'};\nAttributes.sepia                   = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.brightness              = {defaultValue: 100, property: 'filter', defaultUnit: '%'};\nAttributes.grayscale               = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.contrast                = {defaultValue: 100, property: 'filter', defaultUnit: '%'};\nAttributes.invert                  = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.saturation              = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.hueRotate               = {defaultValue: 0, property: 'filter', defaultUnit: 'deg'};\n\nAttributes.rotate                  = {defaultValue: 0, property: 'transform', defaultUnit: 'deg'};\nAttributes.rotate3d                = {defaultValue: {x:0, y:0, z:1, angle:0}, property: 'transform', calculator: 'quaternion', defaultUnit: 'deg'};\n\nAttributes.translate               = {defaultValue: {x:0, y:0}, property: 'transform', calculator: '2d', defaultUnit: 'px'};\nAttributes.translateX              = {defaultValue: 0, property: 'transform', defaultUnit: 'px'};\nAttributes.translateY              = {defaultValue: 0, property: 'transform', defaultUnit: 'px'};\nAttributes.translateZ              = {defaultValue: 0, property: 'transform', defaultUnit: 'px'};\nAttributes.translate3d             = {defaultValue: {x:0, y:0, z:0}, property: 'transform', calculator: '3d', defaultUnit: 'px'};\n\nAttributes.scale                   = {defaultValue: {x:1, y:1}, property: 'transform', calculator: '2d'};\nAttributes.scaleX                  = {defaultValue: 1, property: 'transform'};\nAttributes.scaleY                  = {defaultValue: 1, property: 'transform'};\nAttributes.scaleZ                  = {defaultValue: 1, property: 'transform'};\nAttributes.scale3d                 = {defaultValue: {x:1, y:1, z:1}, property: 'transform', calculator: '3d'};\n\nAttributes.skew                    = {defaultValue: {x:0, y:0}, defaultUnit: 'deg', property: 'transform', calculator: '2d'};\nAttributes.skewX                   = {defaultValue: 0, defaultUnit: 'deg', property: 'transform'};\nAttributes.skewY                   = {defaultValue: 0, defaultUnit: 'deg', property: 'transform'};\n\nAttributes.backface                = {defaultValue: 0};\nAttributes.visibility              = {defaultValue: 1};\n\nAttributes.backgroundColor         = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.color                   = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderTopColor          = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderRightColor        = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderBottomColor       = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderLeftColor         = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderColor             = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.outlineColor            = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.textDecorationColor     = {defaultValue: Color(), calculator: 'rgba'};\n\nAttributes.textShadowX             = {defaultValue: 0, defaultUnit: 'px', property: 'textShadow'};\nAttributes.textShadowY             = {defaultValue: 0, defaultUnit: 'px', property: 'textShadow'};\nAttributes.textShadowPosition      = {defaultValue: {x: 0, y: 0}, defaultUnit: 'px', calculator: '2d', property: 'textShadow'};\nAttributes.textShadowBlur          = {defaultValue: 0, defaultUnit: 'px', property: 'textShadow'};\nAttributes.textShadowColor         = {defaultValue: Color(), calculator: 'rgba', property: 'textShadow'};\n\nAttributes.shadowX                 = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowY                 = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowPosition          = {defaultValue: {x: 0, y: 0}, defaultUnit: 'px', calculator: '2d', property: 'shadow'};\nAttributes.shadowBlur              = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowSpread            = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowColor             = {defaultValue: Color(), calculator: 'rgba', property: 'shadow'};\nAttributes.shadowInset             = {defaultValue: 0, property: 'shadow'};\n\nAttributes.scrollTop               = {defaultValue: 0};\nAttributes.scrollLeft              = {defaultValue: 0};\n\n\n/**\n * Returns an attribute based on the given input. If the input is an object it's assumed to be an attribute and it's\n * returned immediately. If the input is a string the attribute with the given name is returned. Otherwise\n * the default attribute is returned.\n *\n * @param {Object|String} attr\n */\nfunction $attribute(attr)\n{\n  if ( isObject( attr ) && isDefined( attr.defaultValue ) )\n  {\n    return attr;\n  }\n  if ( isString( attr ) && attr in Attributes )\n  {\n    return Attributes[ attr ];\n  }\n\n  return Attributes['default'];\n}\n\n\n\nfunction factory(nm, relativeTo)\n{\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating[nm] === false)\n      {\n        var style = $style( e, nm );\n        var converted = $convert( e, style, anim.units[ nm ], relativeTo );\n\n        if ( converted !== false )\n        {\n          anim.frame[ nm ] = converted;\n          anim.animating[ nm  ] = true;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ nm ] = anim.value( nm );\n    },\n    unset: function(e, anim, attr)\n    {\n      e.style[ nm ] = null;\n    }\n  };\n}\n\nfunction factoryDerivable(nm, relativeTo, deriver)\n{\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating[nm] === false)\n      {\n        var style = $style( e, nm );\n        var converted = $convert( e, style, anim.units[ nm ], relativeTo );\n\n        if ( converted !== false )\n        {\n          anim.frame[ nm ] = converted;\n          anim.animating[ nm ] = true;\n        }\n        else if ( isFunction( deriver ) )\n        {\n          converted = $convert( e, deriver( e ), anim.units[ nm ], relativeTo );\n\n          if ( converted !== false )\n          {\n            anim.frame[ nm ] = converted;\n            anim.animating[ nm ] = true;\n          }\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ nm ] = anim.value( nm );\n    },\n    unset: function(e, anim, attr)\n    {\n      e.style[ nm ] = null;\n    }\n  };\n}\n\nfunction factoryColor(nm)\n{\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating[nm] === false)\n      {\n        var style = $style( e, nm );\n        var parsed = Color.parse( style );\n\n        if (parsed !== false)\n        {\n          anim.frame[nm] = parsed;\n          anim.animating[nm] = true;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ nm ] = Color.format( anim.frame[nm] );\n    },\n    unset: function(e, anim, attr)\n    {\n      e.style[ nm ] = null;\n    }\n  };\n}\n\nfunction factoryNumberAttribute(nm)\n{\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating[nm] === false)\n      {\n        var parsed = parseFloat( e[ nm ] );\n\n        if (isFinite(parsed))\n        {\n          anim.frame[nm] = parsed;\n          anim.animating[nm] = true;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.attrs[ nm ] = anim.frame[nm];\n    },\n    unset: function(e, anim, attr)\n    {\n      e[ nm ] = null;\n    }\n  };\n}\n\n\nvar Properties = {};\n\nProperties.noop =\n{\n  get: function(e, anim)\n  {\n  },\n  set: function(e, anim)\n  {\n  },\n  unset: function(e, anim)\n  {\n  }\n};\n\nProperties.padding                  = factory( 'padding', 'parentWidth' );\nProperties.paddingTop               = factory( 'paddingTop', 'parentWidth' );\nProperties.paddingRight             = factory( 'paddingRight', 'parentWidth' );\nProperties.paddingBottom            = factory( 'paddingBottom', 'parentWidth' );\nProperties.paddingLeft              = factory( 'paddingLeft', 'parentWidth' );\n\nProperties.margin                   = factory( 'margin', 'parentWidth' );\nProperties.marginTop                = factory( 'marginTop', 'parentWidth' );\nProperties.marginRight              = factory( 'marginRight', 'parentWidth' );\nProperties.marginBottom             = factory( 'marginBottom', 'parentWidth' );\nProperties.marginLeft               = factory( 'marginLeft', 'parentWidth' );\n\nProperties.borderRadius             = factory( 'borderRadius', 'width' );\nProperties.borderTopLeftRadius      = factory( 'borderTopLeftRadius', 'width' );\nProperties.borderTopRightRadius     = factory( 'borderTopRightRadius', 'width' );\nProperties.borderBottomLeftRadius   = factory( 'borderBottomLeftRadius', 'width' );\nProperties.borderBottomRightRadius  = factory( 'borderBottomRightRadius', 'width' );\n\nProperties.borderWidth              = factory( 'borderWidth' );\nProperties.borderTopWidth           = factory( 'borderTopWidth' );\nProperties.borderRightWidth         = factory( 'borderRightWidth' );\nProperties.borderBottomWidth        = factory( 'borderBottomWidth' );\nProperties.borderLeftWidth          = factory( 'borderLeftWidth' );\n\nProperties.outlineWidth             = factory( 'outlineWidth' );\nProperties.textIndent               = factory( 'textIndent', 'parentWidth' );\nProperties.tabSize                  = factory( 'tabSize', 'parentWidth' );\nProperties.borderSpacing            = factory( 'borderSpacing' );\nProperties.fontSize                 = factory( 'fontSize', 'parentFontSize' );\nProperties.lineHeight               = factory( 'lineHeight', 'fontSize' );\nProperties.letterSpacing            = factory( 'letterSpacing' );\nProperties.wordSpacing              = factory( 'wordSpacing' );\n\nProperties.zIndex                   = factory( 'zIndex' );\n\nProperties.color                    = factoryColor( 'color' );\nProperties.backgroundColor          = factoryColor( 'backgroundColor' );\nProperties.borderTopColor           = factoryColor( 'borderTopColor' );\nProperties.borderRightColor         = factoryColor( 'borderRightColor' );\nProperties.borderBottomColor        = factoryColor( 'borderBottomColor' );\nProperties.borderLeftColor          = factoryColor( 'borderLeftColor' );\nProperties.borderColor              = factoryColor( 'borderColor' );\nProperties.outlineColor             = factoryColor( 'outlineColor' );\nProperties.textDecorationColor      = factoryColor( 'textDecorationColor' );\n\nProperties.minWidth                 = factory( 'minWidth', 'parentWidth' );\nProperties.maxWidth                 = factory( 'maxWidth', 'parentWidth' );\nProperties.minHeight                = factory( 'minHeight', 'parentHeight' );\nProperties.maxHeight                = factory( 'maxHeight', 'parentHeight' );\n\nProperties.width                    = factoryDerivable('width', 'parentWidth', function(e) { return e.offsetWidth + 'px'; });\nProperties.height                   = factoryDerivable('height', 'parentHeight', function(e) { return e.offsetHeight + 'px'; });\n\nProperties.top                      = factoryDerivable('top', 'parentHeight', function(e) { return e.offsetTop + 'px'; });\nProperties.right                    = factoryDerivable('right', 'parentWidth', function(e) { return (e.parentNode.scrollWidth - (e.offsetLeft + e.offsetWidth)) + 'px'; });\nProperties.bottom                   = factoryDerivable('bottom', 'parentHeight', function(e) { return (e.parentNode.scrollHeight - (e.offsetTop + e.offsetHeight)) + 'px'; });\nProperties.left                     = factoryDerivable('left', 'parentWidth', function(e) { return e.offsetLeft + 'px'; });\n\nProperties.scrollTop                = factoryNumberAttribute( 'scrollTop' );\nProperties.scrollLeft               = factoryNumberAttribute( 'scrollLeft' );\n\nProperties.zIndex.set = function(e, anim)\n{\n  anim.styles.zIndex = Math.floor( anim.frame.zIndex );\n};\n\nProperties.visibility =\n{\n  get: function(e, anim)\n  {\n    if (anim.animating.visibility === false)\n    {\n      var style = $style( e, 'visibility' );\n      anim.frame.visibility = style === 'hidden' ? 0.0 : 1.0;\n      anim.animating = true;\n    }\n  },\n  set: function(e, anim)\n  {\n    anim.styles.visibility = anim.frame.visibility < 0.5 ? 'hidden' : 'visible';\n  },\n  unset: function(e, anim)\n  {\n    e.style.visibility = null;\n  }\n};\n\nProperties.backface = (function()\n{\n  var css = $prefix(['WebkitBackfaceVisibility', 'MozBackfaceVisibility', 'msBackfaceVisibility', 'BackfaceVisibility']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      if ( anim.animating.backface === false )\n      {\n        var style = $style( e, css );\n\n        anim.frame.backface = (style === 'visible') ? 1.0 : 0.0;\n        anim.animating.backface = true;\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[css] = anim.frame.backface < 0.5 ? 'none' : 'visible';\n    },\n    unset: function(e, anim)\n    {\n      e.style[ css ] = null;\n    }\n\n  };\n\n})();\n\nProperties.transformOrigin = (function()\n{\n  var css = $prefix(['WebkitTransformOrigin', 'MozTransformOrigin', 'OTransformOrigin', 'msTransformOrigin', 'transformOrigin']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var keywords =\n  {\n    'left':   '0%',\n    'center': '50%',\n    'right':  '100%',\n    'top':    '0%',\n    'bottom': '100%'\n  };\n\n  var setOriginAttribute = function(e, value, anim, attr, relativeTo )\n  {\n    if (anim.animating[attr] === false)\n    {\n      if ( value in keywords )\n      {\n        value = keywords[ value ];\n      }\n\n      var converted = $convert( e, value, anim.units[ attr ], relativeTo );\n\n      if ( converted !== false )\n      {\n        anim.frame[ attr ] = converted;\n        anim.animating[ attr ] = true;\n      }\n    }\n  };\n\n  var setOrigin = function(e, split, anim)\n  {\n    if (anim.animating.origin === false)\n    {\n      if ((split.length === 1) ||\n          (split.length === 2 && split[0] === split[1]) ||\n          (split.length === 3 && split[0] === split[1] && split[1] === split[2]))\n      {\n        setOriginAttribute( e, split[0], anim, 'origin', 'width' );\n      }\n    }\n  };\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n\n      if (style)\n      {\n        var origin = style.toLowerCase();\n        var split = origin.split(' ');\n\n        switch (split.length)\n        {\n        case 3:\n          setOriginAttribute( e, split[0], anim, 'originX', 'width' );\n          setOriginAttribute( e, split[1], anim, 'originY', 'height' );\n          setOriginAttribute( e, split[2], anim, 'originZ' );\n          setOrigin( e, split, anim );\n          break;\n        case 2:\n          setOriginAttribute( e, split[0], anim, 'originX', 'width' );\n          setOriginAttribute( e, split[1], anim, 'originY', 'height' );\n          setOrigin( e, split, anim );\n          break;\n        case 1:\n          setOriginAttribute( e, split[0], anim, 'originX', 'width' );\n          setOriginAttribute( e, split[0], anim, 'originY', 'height' );\n          setOrigin( e, split, anim );\n          break;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      var style = null;\n\n      if ( isDefined( anim.frame.originZ ) )\n      {\n        style = anim.valueOr( 'originX', 'origin', 'x' ) + ' ' + anim.valueOr( 'originY', 'origin', 'y' ) + ' ' + anim.valueOr( 'originZ', 'origin', 'z' );\n      }\n      else\n      {\n        style = anim.valueOr( 'originX', 'origin', 'x' ) + ' ' + anim.valueOr( 'originY', 'origin', 'y' );\n      }\n\n      anim.styles[css] = style;\n    },\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n  };\n\n})();\n\nProperties.transform = (function()\n{\n  var css = $prefix(['WebkitTransform', 'MozTransform', 'OTransform', 'msTransform', 'transform']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var parse = function( e, value, anim, attr, relativeTo )\n  {\n    var desiredUnit = anim.units[ attr ];\n    var converted = $convert( e, value, desiredUnit, relativeTo );\n\n    if ( converted !== false )\n    {\n      return converted;\n    }\n\n    // TODO show convert this to desiredUnit, however defaultValue may be non-scalar.\n    return anim.getAttribute( attr ).defaultValue;\n  };\n\n  var getter1d = function(e, anim, parsed, attr)\n  {\n    return parse( e, parsed[1], anim, attr, 'width' );\n  };\n  var getter2d = function(e, anim, parsed, attr)\n  {\n    return {\n      x: parse( e, parsed[1], anim, attr, 'width' ),\n      y: parse( e, parsed[2], anim, attr, 'height' )\n    };\n  };\n  var getter3d = function(e, anim, parsed, attr)\n  {\n    return {\n      x: parse( e, parsed[1], anim, attr, 'width' ),\n      y: parse( e, parsed[2], anim, attr, 'height' ),\n      z: parse( e, parsed[3], anim, attr )\n    };\n  };\n  var getter4d = function(e, anim, parsed, attr)\n  {\n    return {\n      x: parse( e, parsed[1], anim, attr, 'width' ),\n      y: parse( e, parsed[2], anim, attr, 'height' ),\n      z: parse( e, parsed[3], anim, attr ),\n      angle: parse( e, parsed[4], anim, attr )\n    };\n  };\n\n  var setter1d = function(attr, value, unit)\n  {\n    return attr + '(' + value + unit + ')';\n  };\n  var setter2d = function(attr, value, unit)\n  {\n    return attr + '(' + value.x + unit + ',' + value.y + unit + ')';\n  };\n  var setter3d = function(attr, value, unit)\n  {\n    return attr + '(' + value.x + unit + ',' + value.y + unit + ',' + value.z + unit + ')';\n  };\n  var setter4d = function(attr, value, unit)\n  {\n    return attr + '(' + value.x + ',' + value.y + ',' + value.z + ',' + value.angle + unit + ')';\n  };\n  var combine = function(ax, ay, bx, by, ascl, bscl)\n  {\n    return {\n      x: (ascl * ax) + (bscl * bx),\n      y: (ascl * ay) + (bscl * by)\n    };\n  };\n  var place1d = function(anim, e, attr, value, relativeTo)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = $convert( e, value, anim.units[ attr ], relativeTo );\n      anim.animating[ attr ] = true;\n    }\n  };\n  var place2d = function(anim, e, attr, valueX, valueY, relativeToX, relativeToY)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = {\n        x: $convert( e, valueX, anim.units[ attr ], relativeToX ),\n        y: $convert( e, valueY, anim.units[ attr ], relativeToY )\n      };\n      anim.animating[ attr ] = true;\n    }\n  };\n  var place3d = function(anim, e, attr, valueX, valueY, valueZ, relativeToX, relativeToY, relativeToZ)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = {\n        x: $convert( e, valueX, anim.units[ attr ], relativeToX ),\n        y: $convert( e, valueY, anim.units[ attr ], relativeToY ),\n        z: $convert( e, valueZ, anim.units[ attr ], relativeToZ )\n      };\n      anim.animating[ attr ] = true;\n    }\n  };\n  var place4d = function(anim, e, attr, valueX, valueY, valueZ, valueRotate, relativeToX, relativeToY, relativeToZ, relativeToRotate)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = {\n        x: $convert( e, valueX, anim.units[ attr ], relativeToX ),\n        y: $convert( e, valueY, anim.units[ attr ], relativeToY ),\n        z: $convert( e, valueZ, anim.units[ attr ], relativeToZ ),\n        angle: $convert( e, valueRotate, anim.units[ attr ], relativeToRotate )\n      };\n      anim.animating[ attr ] = true;\n    }\n  };\n\n  var regexes =\n  {\n    translate:    /translate\\(([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    translate3d:  /translate3d\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    translateX:   /translateX\\(([^\\)]+)\\)/i,\n    translateY:   /translateY\\(([^\\)]+)\\)/i,\n    translateZ:   /translateZ\\(([^\\)]+)\\)/i,\n    scale:        /scale\\(([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    scale3d:      /scale3d\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    scaleX:       /scaleX\\(([^\\)]+)\\)/i,\n    scaleY:       /scaleY\\(([^\\)]+)\\)/i,\n    scaleZ:       /scaleZ\\(([^\\)]+)\\)/i,\n    rotate:       /rotate\\(([^\\)]+)\\)/i,\n    skew:         /skew\\(([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    skewX:        /skewX\\(([^\\)]+)\\)/i,\n    skewY:        /skewY\\(([^\\)]+)\\)/i,\n    rotate3d:     /rotate3d\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    rotateX:      /rotateX\\(([^\\)]+)\\)/i,\n    rotateY:      /rotateY\\(([^\\)]+)\\)/i,\n    rotateZ:      /rotateZ\\(([^\\)]+)\\)/i\n  };\n\n  var matrix = /matrix\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\)/i;\n\n  var getters =\n  {\n    translate:    getter2d,\n    translate3d:  getter3d,\n    translateX:   getter1d,\n    translateY:   getter1d,\n    translateZ:   getter1d,\n    scale:        getter2d,\n    scale3d:      getter3d,\n    scaleX:       getter1d,\n    scaleY:       getter1d,\n    scaleZ:       getter1d,\n    rotate:       getter1d,\n    rotate3d:     getter4d,\n    rotateX:      getter1d,\n    rotateY:      getter1d,\n    rotateZ:      getter1d,\n    skew:         getter2d,\n    skewX:        getter1d,\n    skewY:        getter1d\n  };\n\n  var setters =\n  {\n    translate:    setter2d,\n    translate3d:  setter3d,\n    translateX:   setter1d,\n    translateY:   setter1d,\n    translateZ:   setter1d,\n    scale:        setter2d,\n    scale3d:      setter3d,\n    scaleX:       setter1d,\n    scaleY:       setter1d,\n    scaleZ:       setter1d,\n    rotate:       setter1d,\n    rotate3d:     setter4d,\n    rotateX:      setter1d,\n    rotateY:      setter1d,\n    rotateZ:      setter1d,\n    skew:         setter2d,\n    skewX:        setter1d,\n    skewY:        setter1d\n  };\n\n  var props = new FastMap( regexes );\n  var regex = props.values;\n  var attrs = props.keys;\n  props.setters = [];\n  props.getters = [];\n\n  for (var prop in getters)\n  {\n    var i = props.indexOf( prop );\n\n    props.getters[ i ] = getters[ prop ];\n    props.setters[ i ] = setters[ prop ];\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n\n      var matrixParsed = matrix.exec( style );\n\n      if ( matrixParsed )\n      {\n        var a = parseFloat( matrixParsed[ 1 ] );\n        var b = parseFloat( matrixParsed[ 2 ] );\n        var c = parseFloat( matrixParsed[ 3 ] );\n        var d = parseFloat( matrixParsed[ 4 ] );\n        var tx = parseFloat( matrixParsed[ 5 ] );\n        var ty = parseFloat( matrixParsed[ 6 ] );\n\n        // Make sure the matrix is invertible\n        if ((a * d - b * c) !== 0)\n        {\n          // Take care of translation\n          var translateX = tx + 'px';\n          var translateY = ty + 'px';\n\n          // Compute X scale factor and normalize first row.\n          var scaleX = Math.sqrt( a * a + b * b );\n          if ( scaleX !== 0 )\n          {\n            a /= scaleX;\n            b /= scaleX;\n          }\n\n          // Compute shear factor and make 2nd row orthogonal to 1st.\n          var skew = a * c + b * d;\n          var combined = combine( c, d, a, b, 1.0, -skew );\n          c = combined.x;\n          d = combined.y;\n\n          // Now, compute Y scale and normalize 2nd row.\n          var scaleY = Math.sqrt( c * c + d * d );\n          if ( scaleY !== 0 )\n          {\n            c /= scaleY;\n            d /= scaleY;\n            skew /= scaleY;\n          }\n\n          // Now, get the rotation out\n          var rotate = Math.atan2( b, a ) + 'rad';\n\n          // Place values in animator.\n          place2d( anim, e, 'translate', translateX, translateY, 'width', 'height' );\n          place3d( anim, e, 'translate3d', translateX, translateY, 0, 'width', 'height' );\n          place1d( anim, e, 'translateX', translateX, 'width' );\n          place1d( anim, e, 'translateY', translateY, 'height' );\n          place2d( anim, e, 'scale', scaleX, scaleY );\n          place1d( anim, e, 'scaleX', scaleX );\n          place1d( anim, e, 'scaleY', scaleY );\n          place3d( anim, e, 'scale3d', scaleX, scaleY, 1 );\n          place1d( anim, e, 'rotate', rotate );\n          place4d( anim, e, 'rotate3d', 0, 0, 1, rotate );\n          place1d( anim, e, 'rotateZ', rotate );\n          place2d( anim, e, 'skew', skew, skew );\n          place1d( anim, e, 'skewX', skew );\n          place1d( anim, e, 'skewY', skew );\n\n          return;\n        }\n      }\n\n      for (var attr in anim.animating)\n      {\n        var i = props.indexOf( attr );\n\n        if ( i !== -1 && anim.animating[ attr ] === false )\n        {\n          var parsed = regex[ i ].exec( style );\n\n          if ( parsed )\n          {\n            anim.frame[ attr ] = props.getters[ i ]( e, anim, parsed, attr );\n            anim.animating[ attr ] = true;\n          }\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      var transforms = [];\n\n      for (var i = 0; i < attrs.length; i++)\n      {\n        var attr = attrs[ i ];\n\n        if ( attr in anim.frame )\n        {\n          transforms.push( props.setters[ i ]( attr, anim.frame[ attr ], anim.units[ attr ] ) );\n        }\n      }\n\n      if (transforms.length)\n      {\n        anim.styles[ css ] = transforms.join( ' ' );\n      }\n    },\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, '' );\n    }\n  };\n\n})();\n\nProperties.opacity = (function()\n{\n  var css = $prefix(['WebkitOpacity', 'MozOpacity', 'KhtmlOpacity', 'opacity']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating.opacity === false)\n      {\n        var style = $style( e, css );\n        var opacity = parseFloat( style );\n\n        if ( !isNaN(opacity) )\n        {\n          anim.frame.opacity = opacity;\n          anim.animating.opacity = true;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ css ] = clamp( anim.frame.opacity, 0, 1 );\n    },\n    unset: function(e, anim)\n    {\n      e.style[ css ] = null;\n    }\n  };\n\n})();\n\nProperties.shadow = (function()\n{\n  var css = $prefix(['WebkitBoxShadow', 'MozBoxShadow', 'boxShadow']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var parsePart = function( e, anim, attr, value, relativeTo )\n  {\n    if ( anim.updating[ attr ] === false && value )\n    {\n      var parsed = $convert( e, value, anim.units[ attr ], relativeTo );\n\n      if ( parsed !== false )\n      {\n        anim.frame[ attr ] = parsed;\n        anim.updating[ attr ] = true;\n      }\n    }\n  };\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n      var parts = style.split( ' ' );\n\n      if ( parts.length < 3 )\n      {\n        return;\n      }\n\n      var inset = 0;\n\n      if ( parts[ 0 ] === 'inset' )\n      {\n        inset = 1;\n        parts.shift();\n      }\n\n      var x = parts[ 0 ];\n      var y = parts[ 1 ];\n      var blur = false, spread = false, color = false;\n\n      switch ( parts.length ) {\n        case 3:\n          color = parts[ 2 ];\n          break;\n        case 4:\n          blur = parts[ 2 ];\n          color = parts[ 3 ];\n          break;\n        case 5:\n          blur = parts[ 2 ];\n          spread = parts[ 3 ];\n          color = parts[ 4 ];\n          break;\n      }\n\n      parsePart( e, anim, 'shadowX', x, 'width' );\n      parsePart( e, anim, 'shadowY', y, 'height' );\n      parsePart( e, anim, 'shadowBlur', blur, 'width' );\n      parsePart( e, anim, 'shadowSpread', spread, 'width' );\n\n      if ( anim.updating.shadowPosition === false )\n      {\n        var parsedX = $convert( e, x, anim.units.shadowPosition, 'width' );\n        var parsedY = $convert( e, y, anim.units.shadowPosition, 'height' );\n\n        if ( parsedX !== false && parsedY !== false )\n        {\n          anim.frame.shadowPosition = {\n            x: parsedX,\n            y: parsedY\n          };\n          anim.updating.shadowPosition = true;\n        }\n      }\n\n      if ( anim.updating.shadowInset === false )\n      {\n        anim.frame.shadowInset = inset;\n        anim.updating.shadowInset = true;\n      }\n\n      if ( anim.updating.shadowColor === false )\n      {\n        var parsed = Color.parse( color );\n\n        if ( parsed !== false )\n        {\n          anim.frame.shadowColor = parsed;\n          anim.updating.shadowColor = true;\n        }\n      }\n\n    },\n\n    set: function(e, anim)\n    {\n      var style = '';\n\n      if ( anim.frame.inset )\n      {\n        style += 'inset '; // TODO test - fixed but not sure\n      }\n\n      style += anim.valueOr( 'shadowX', 'shadowPosition', 'x' ) + ' ';\n      style += anim.valueOr( 'shadowY', 'shadowPosition', 'y' ) + ' ';\n\n      if ( isNumber( anim.frame.shadowBlur ) )\n      {\n        style += anim.value( 'shadowBlur' ) + ' ';\n      }\n\n      if ( isNumber( anim.frame.shadowSpread ) )\n      {\n        style += anim.value( 'shadowSpread' ) + ' ';\n      }\n\n      style += Color.format( anim.frame.shadowColor );\n\n      anim.styles[ css ] = style;\n    },\n\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n\n  };\n\n})();\n\n\nProperties.textShadow = (function()\n{\n  var css = $prefix(['WebkitTextShadow', 'MozTextShadow', 'textShadow']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var parsePart = function( e, anim, attr, value, relativeTo )\n  {\n    if ( anim.updating[ attr ] === false && value )\n    {\n      var parsed = $convert( e, value, anim.units[ attr ], relativeTo );\n\n      if ( parsed !== false )\n      {\n        anim.frame[ attr ] = parsed;\n        anim.updating[ attr ] = true;\n      }\n    }\n  };\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n      var parts = style.split( ' ' );\n\n      if ( parts.length < 3 )\n      {\n        return;\n      }\n\n      var x = parts[ 0 ];\n      var y = parts[ 1 ];\n      var blur = false, color = false;\n\n      switch ( parts.length ) {\n        case 3:\n          color = parts[ 2 ];\n          break;\n        case 4:\n          blur = parts[ 2 ];\n          color = parts[ 3 ];\n          break;\n      }\n\n      parsePart( e, anim, 'textShadowX', x, 'width' );\n      parsePart( e, anim, 'textShadowY', y, 'height' );\n      parsePart( e, anim, 'textShadowBlur', blur, 'width' );\n\n      if ( anim.updating.textShadowPosition === false )\n      {\n        var parsedX = $convert( e, x, anim.units.textShadowPosition, 'width' );\n        var parsedY = $convert( e, y, anim.units.textShadowPosition, 'height' );\n\n        if ( parsedX !== false && parsedY !== false )\n        {\n          anim.frame.textShadowPosition = {\n            x: parsedX,\n            y: parsedY\n          };\n          anim.updating.textShadowPosition = true;\n        }\n      }\n\n      if ( anim.updating.textShadowColor === false )\n      {\n        var parsed = Color.parse( color );\n\n        if ( parsed !== false )\n        {\n          anim.frame.textShadowColor = parsed;\n          anim.updating.textShadowColor = true;\n        }\n      }\n    },\n\n    set: function(e, anim)\n    {\n      var style = '';\n\n      if ( anim.frame.inset )\n      {\n        style += 'inset '; // TODO test - fixed but not sure\n      }\n\n      style += anim.valueOr( 'textShadowX', 'textShadowPosition', 'x' ) + ' ';\n      style += anim.valueOr( 'textShadowY', 'textShadowPosition', 'y' ) + ' ';\n\n      if ( isNumber( anim.frame.textShadowBlur ) )\n      {\n        style += anim.value( 'textShadowBlur' ) + ' ';\n      }\n\n      if ( isNumber( anim.frame.textShadowSpread ) )\n      {\n        style += anim.value( 'textShadowSpread' ) + ' ';\n      }\n\n      style += Color.format( anim.frame.textShadowColor );\n\n      anim.styles[ css ] = style;\n    },\n\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n\n  };\n\n})();\n\nProperties.filter = (function()\n{\n  var css = $prefix(['WebkitFilter', 'MozFilter', 'OFilter', 'msFilter', 'filter']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var methods =\n  {\n    grayscale:  'grayscale',\n    sepia:      'sepia',\n    saturate:   'saturate',\n    hueRotate:  'hue-rotate',\n    invert:     'invert',\n    brightness: 'brightness',\n    contrast:   'contrast',\n    blur:       'blur'\n  };\n\n  var patterns = {};\n\n  for (var attr in methods)\n  {\n    patterns[attr] = new RegExp( methods[attr] + '\\(([^\\)]+)\\)', 'i');\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n\n      for (var attr in patterns)\n      {\n        if ( anim.animating[attr] === false )\n        {\n          var parsed = patterns[attr].exec( style );\n\n          if ( parsed )\n          {\n            var converted = $convert( e, parsed[1], anim.units[ attr ] );\n\n            if ( converted !== false )\n            {\n              anim.frame[ attr ] = converted;\n              anim.animating[ attr ] = true;\n            }\n          }\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      // we don't check anim.updated[attr] here since the current value of a transform property is important\n\n      var filters = [];\n\n      for (var attr in methods)\n      {\n        if ( attr in anim.frame )\n        {\n          filters.push( methods[attr] + '(' + anim.value( attr ) + ')' );\n        }\n      }\n\n      if (filters.length)\n      {\n        anim.styles[ css ] = filters.join(' ');\n      }\n    },\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n  };\n\n})();\n\nProperties.center =\n{\n  get: function(e, anim)\n  {\n    var cx = (e.offsetLeft + e.offsetWidth * 0.5) + 'px';\n    var cy = (e.offsetTop + e.offsetHeight * 0.5) + 'px';\n\n    if ( anim.animating.center === false )\n    {\n      var desiredUnit = anim.units.center;\n      var ccx = $convert( e, cx, desiredUnit, 'parentWidth' );\n      var ccy = $convert( e, cy, desiredUnit, 'parentHeight' );\n\n      if ( ccx !== false && ccy !== false )\n      {\n        anim.frame.center = {\n          x: ccx,\n          y: ccy\n        };\n        anim.animating.center = true;\n      }\n    }\n    if ( anim.animating.centerX === false )\n    {\n      var desiredUnit = anim.units.centerX;\n      var ccx = $convert( e, cx, desiredUnit, 'parentWidth' );\n\n      if ( ccx !== false )\n      {\n        anim.frame.centerX = ccx;\n        anim.animating.centerX = true;\n      }\n    }\n    if ( anim.animating.centerY === false )\n    {\n      var desiredUnit = anim.units.centerY;\n      var ccy = $convert( e, cy, desiredUnit, 'parentHeight' );\n\n      if ( ccy !== false )\n      {\n        anim.frame.centerY = ccy;\n        anim.animating.centerY = true;\n      }\n    }\n  },\n  preset: function(e, anim)\n  {\n    anim.cached.width  = $convert( e, e.offsetWidth + 'px', anim.units.centerX || anim.units.center, 'parentWidth' );\n    anim.cached.height = $convert( e, e.offsetHeight + 'px', anim.units.centerY || anim.units.center, 'parentHeight' );\n  },\n  set: function(e, anim)\n  {\n    var rw = anim.cached.width * 0.5;\n    var rh = anim.cached.height * 0.5;\n\n    if ( anim.updated.center )\n    {\n      anim.styles.left = (anim.frame.center.x - rw) + anim.units.center;\n      anim.styles.top = (anim.frame.center.y - rh) + anim.units.center;\n    }\n    if ( anim.updated.centerX )\n    {\n      anim.styles.left = (anim.frame.centerX - rw) + anim.units.centerX;\n    }\n    if ( anim.updated.centerY )\n    {\n      anim.styles.top = (anim.frame.centerY - rh) + anim.units.centerY;\n    }\n  },\n  unset: function(e, anim, attr)\n  {\n\n  }\n};\n\nProperties.orbit =\n{\n  DEGREE_TO_RADIAN: Math.PI / 180.0,\n\n  RADIAN_TO_DEGREE: 180.0 / Math.PI,\n\n  get: function(e, anim)\n  {\n    var ox = (e.parentNode.scrollWidth * 0.5);\n    var oy = (e.parentNode.scrollHeight * 0.5);\n    var cx = (e.offsetLeft + e.offsetWidth * 0.5);\n    var cy = (e.offsetTop + e.offsetHeight * 0.5);\n    var dx = cx - ox;\n    var dy = cy - oy;\n\n    if ( anim.animating.orbitOffset === false )\n    {\n      var cunit = anim.units.orbitOffset;\n      var cox = $convert( e, ox + 'px', cunit, 'parentWidth' );\n      var coy = $convert( e, oy + 'px', cunit, 'parentHeight' );\n\n      if ( cox !== false && coy !== false )\n      {\n        anim.frame.orbitOffset = {\n          x: cox,\n          y: coy\n        };\n        anim.animating.orbitOffset = false;\n      }\n    }\n\n    if ( anim.animating.distance === false )\n    {\n      anim.frame.distance = Math.sqrt( dx * dx + dy * dy );\n      anim.animating.distance = true;\n    }\n\n    if ( anim.animating.angle === false )\n    {\n      anim.frame.angle = Math.atan2( dy, dx ) * this.RADIAN_TO_DEGREE;\n      anim.animating.angle = true;\n    }\n  },\n\n  preset: function(e, anim)\n  {\n    anim.cached.parentWidth = e.parentNode.scrollWidth;\n    anim.cached.parentHeight = e.parentNode.scrollHeight;\n    anim.cached.width = e.offsetWidth;\n    anim.cached.height = e.offsetHeight;\n  },\n\n  set: function(e, anim)\n  {\n    // TODO calculator this correctly\n    var cunit = anim.units.orbitOffset || '%';\n    var orbitX = anim.frame.orbitOffset ? anim.frame.orbitOffset.x : 50;\n    var orbitY = anim.frame.orbitOffset ? anim.frame.orbitOffset.y : 50;\n\n    var originUnit = anim.units.origin || '%';\n    var originX = anim.frame.origin ? anim.frame.origin.x : 50;\n    var originY = anim.frame.origin ? anim.frame.origin.y : 50;\n\n    var cox = $convert( e, orbitX + cunit, 'px', anim.cached.parentWidth / 100.0 );\n    var coy = $convert( e, orbitY + cunit, 'px', anim.cached.parentHeight / 100.0 );\n\n    var ox = $convert( e, originX + originUnit, 'px', anim.cached.width / 100.0 );\n    var oy = $convert( e, originY + originUnit, 'px', anim.cached.height / 100.0 );\n\n    var angle = (anim.frame.angle || 0.0) * this.DEGREE_TO_RADIAN;\n    var distance = anim.frame.distance || 0.0;\n\n    var cos = Math.cos( angle ) * distance;\n    var sin = Math.sin( angle ) * distance;\n\n    anim.styles.left = (cox + cos - ox) + 'px';\n    anim.styles.top = (coy + sin - oy) + 'px';\n  },\n\n  unset: function(e, anim, attr)\n  {\n\n  }\n};\n\n\n/**\n * Returns a property for the given name.\n *\n * @param  {String|Object}\n * @return {Object}\n */\nfunction $property(prop)\n{\n  if ( isObject( prop ) && isFunction( prop.get ) && isFunction( prop.set ) )\n  {\n    return prop;\n  }\n  if ( isString( prop ) && prop in Properties )\n  {\n    return Properties[ prop ];\n  }\n\n  throw prop + ' is not a valid property';\n}\n\n\n/**\n * Instantiates a new AnimatorDom given a subject.\n *\n * @param {HTMLElement} e\n * @class AnimatorDom\n * @constructor\n * @extends Animator\n */\nfunction AnimatorDom(subject)\n{\n  this.reset( subject );\n  this.properties = new FastMap();\n  this.propertiesPreset = new FastMap();\n  this.attributeToProperty = {};\n  this.animating = {};\n  this.cached = {};\n  this.units = {};\n  this.styles = {};\n  this.attributes = {};\n  this.styled = false;\n  this.stylesUpdated = false;\n}\n\n/**\n * Extends anim8.Animator\n */\nClass.extend( AnimatorDom, Animator,\n{\n  preupdate: function(now)\n  {\n    // If there are events with paths that contain computed values we should\n    // populate the frame directly from the HTML element.\n    var aa = this.attrimatorsAdded;\n\n    if ( aa.length )\n    {\n      var properties = {};\n\n      for (var i = aa.length - 1; i >= 0; i--)\n      {\n        var attrimator = aa[ i ];\n        var attr = attrimator.attribute;\n\n        if ( !(attr in this.frame) && attrimator.hasComputed() )\n        {\n          properties[ this.attributeToProperty[ attr ] ] = true;\n\n          this.animating[ attr ] = false;\n        }\n      }\n\n      for (var prop in properties)\n      {\n        this.properties.get( prop ).get( this.subject, this );\n      }\n\n      for (var i = aa.length - 1; i >= 0; i--)\n      {\n        var attrimator = aa[ i ];\n        var attr = attrimator.attribute;\n\n        this.setDefault( attr );\n\n        attrimator.start( now, this );\n      }\n\n      aa.length = 0;\n    }\n\n    // If a property currently being animated requires some heads up before it\n    // gets or sets a value, notify it. TODO removed dead properties.\n    var presets = this.propertiesPreset.values;\n    for (var i = presets.length - 1; i >= 0; i--)\n    {\n      presets[ i ].preset( this.subject, this );\n    }\n\n    this.trigger('preupdate');\n\n    return this;\n  },\n\n  update: function(now)\n  {\n    this._update( now );\n\n    this.getStyles();\n    this.stylesUpdated = true;\n\n    return this;\n  },\n\n  apply: function()\n  {\n    if ( !this.styled && !this.stylesUpdated )\n    {\n      this.getStyles();\n    }\n\n    if ( this.styled )\n    {\n      for (var prop in this.styles)\n      {\n         this.subject.style[ prop ] = this.styles[ prop ];\n      }\n\n      for (var prop in this.attributes)\n      {\n        this.subject[ prop ] = this.attributes[ prop ];\n      }\n\n      for (var attr in this.frame)\n      {\n        this.updated[ attr ] = false;\n      }\n\n      this.styled = false;\n    }\n\n    this.stylesUpdated = false;\n\n    this.trigger('apply');\n\n    this.trimAttrimators();\n\n    return this;\n  },\n\n  placeAttrimator: function( attrimator )\n  {\n    this._placeAttrimator( attrimator );\n\n    var attr = attrimator.attribute;\n    var attribute = this.getAttribute( attr );\n    var propertyName = attribute.propertyName;\n    var property = attribute.property;\n\n    this.properties.put( propertyName, property );\n\n    this.attributeToProperty[ attr ] = propertyName;\n    this.units[ attr ] = attribute.defaultUnit;\n\n    if ( attrimator.input && attrimator.input.units && attr in attrimator.input.units )\n    {\n      this.units[ attr ] = attrimator.input.units[ attr ];\n    }\n\n    if ( isFunction( property.preset ) )\n    {\n      this.propertiesPreset.put( propertyName, property );\n    }\n\n    return this;\n  },\n  restore: function()\n  {\n    var props = this.properties.values;\n\n    for (var i = props.length - 1; i >= 0; i--)\n    {\n      props[ i ].unset( this.subject, this, true );\n    }\n\n    this.frame = {};\n\n    return this;\n  },\n  unset: function( attributes )\n  {\n    var attributes = toArray( coalesce( attributes, this.frame ) );\n\n    for (var i = attributes.length - 1; i >= 0; i--)\n    {\n      var attr = attributes[ i ];\n      var prop = this.attributeToProperty[ attr ];\n      var property = this.properties.get( prop );\n\n      if ( property )\n      {\n        property.unset( this.subject, this, attr );\n      }\n\n      this.attrimators.remove( attr );\n\n      delete this.frame[ attr ];\n    }\n\n    return this;\n  },\n  set: function( attributes )\n  {\n    var props = {};\n    var updated = {};\n    var units = {};\n    var styles = {};\n    var attrs = {};\n\n    for (var attr in attributes)\n    {\n      var attribute = this.getAttribute( attr );\n      var value     = attributes[ attr ];\n\n      units[ attr ] = attribute.defaultUnit;\n\n      if ( isString( value ) )\n      {\n        var parsed = $parseValue( value, attribute.defaultUnit );\n\n        if ( parsed !== false )\n        {\n          units[ attr ] = parsed.unit || attribute.defaultUnit;\n          value = parsed.value;\n        }\n      }\n\n      var parsed = attribute.parse( value );\n\n      if ( parsed !== false )\n      {\n        props[ attribute.propertyName ] = attribute.property;\n        attributes[ attr ] = parsed;\n        updated[ attr ] = true;\n      }\n    }\n\n    var flash =\n    {\n      source: this,\n\n      units: units,\n\n      frame: attributes,\n\n      updated: updated,\n\n      styles: styles,\n\n      attributes: attrs,\n\n      cached: {},\n\n      get: function(attributes)\n      {\n        return this.source.get( attributes );\n      },\n\n      value: function(attr)\n      {\n        return attributes[ attr ] + units[ attr ];\n      },\n\n      valueOr: function(attr, other, subproperty)\n      {\n        var value = attributes[ attr ];\n\n        if ( !isDefined( value ) )\n        {\n          value = attributes[ attr = other ];\n\n          if ( isDefined( subproperty ) )\n          {\n            value = value[ subproperty ];\n          }\n        }\n\n        return value + units[ attr ];\n      }\n    };\n\n    for (var prop in props)\n    {\n      var property = props[ prop ];\n\n      if ( isFunction( property.preset ) )\n      {\n        props[ prop ].preset( this.subject, flash );\n      }\n    }\n\n    for (var prop in props)\n    {\n      props[ prop ].set( this.subject, flash );\n    }\n\n    for (var prop in styles)\n    {\n      this.subject.style[ prop ] = styles[ prop ];\n    }\n\n    for (var prop in attrs)\n    {\n      this.subject[ prop ] = attrs[ prop ];\n    }\n\n    return this;\n  },\n\n  /**\n   * Builds the styles map in preparation to be applied.\n   *\n   * @method getStyles\n   */\n  getStyles: function()\n  {\n    this.styles = {};\n    this.attributes = {};\n\n    var applyProperties = {};\n\n    for (var attr in this.frame)\n    {\n      if ( this.updated[ attr ] )\n      {\n        var prop = this.attributeToProperty[ attr ];\n\n        if ( this.properties.has( prop ) )\n        {\n          applyProperties[ prop ] = true;\n        }\n      }\n    }\n\n    for (var prop in applyProperties)\n    {\n      this.properties.get( prop ).set( this.subject, this );\n\n      this.styled = true;\n    }\n  },\n\n  /**\n   * Gets the current attribute values for all attributes specified. The argument must be an object\n   * where the key is the name of an attribute and the value is the desired unit.\n   *\n   * @method get\n   * @param {Object} attributes\n   * @return {Object}\n   */\n  get: function(attributes)\n  {\n    var props = {};\n    var animating = {};\n    var units = {};\n    var out = {};\n\n    for (var attr in attributes)\n    {\n      var attribute = this.getAttribute( attr );\n\n      animating[ attr ] = false;\n      units[ attr ] = attributes[ attr ] || attribute.defaultUnit;\n      props[ attribute.propertyName ] = attribute.property;\n      out[ attr ] = attribute.cloneDefault();\n    }\n\n    var flash =\n    {\n      source: this,\n\n      units: units,\n\n      frame: out,\n\n      animating: animating,\n\n      unit: function(attr)\n      {\n        return units[ attr ];\n      }\n    };\n\n    for (var prop in props)\n    {\n      props[ prop ].get( this.subject, flash );\n    }\n\n    return out;\n  },\n\n  /**\n   * Returns a function that returns the current value for the given attribute when invoked.\n   *\n   * @param {String} attribute\n   * @param {String} desiredUnit\n   * @param {String} relativeTo\n   * @return {Function}\n   */\n  ref: function(attribute, desiredUnit, relativeTo)\n  {\n    var animator = this;\n    var request = {};\n\n    return function()\n    {\n      if ( attribute in animator.frame && isNumber( animator.frame[ attribute ] ) )\n      {\n        return $convert( animator.e, animator.value( attribute ), desiredUnit, relativeTo );\n      }\n\n      request[ attribute ] = desiredUnit;\n\n      var current = animator.get( request );\n\n      if ( isDefined( current[ attribute ] ) )\n      {\n        return current[ attribute ];\n      }\n\n      return animator.getAttribute( attribute ).defaultValue;\n    };\n  },\n\n  /**\n   * Returns the value for the given attribute as a string with the current units.\n   *\n   * @method value\n   * @param {String} attr\n   * @return {String}\n   */\n  value: function(attr)\n  {\n    return this.frame[ attr ] + this.units[ attr ];\n  },\n\n  /**\n   * Returns the value for the given attribute as a string with the current units.\n   * if the attribute doesn't exist a secondary one is looked up. If that value\n   * is an object and contains the given subproperty the value is resolved once again.\n   *\n   * @method valueOr\n   * @param {String} attr\n   * @param {String} other\n   * @param [String] subproperty\n   * @return {String}\n   */\n  valueOr: function(attr, other, subproperty)\n  {\n    var value = this.frame[ attr ];\n\n    if ( !isDefined( value ) )\n    {\n      value = this.frame[ attr = other ];\n\n      if ( isDefined( subproperty ) )\n      {\n        value = value[ subproperty ];\n      }\n    }\n\n    return value + this.units[ attr ];\n  },\n\n  /**\n   * Tweens a single attribute to a target value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenTo\n   * @param {String} attr\n   * @param {T} target\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  tweenTo: function(attr, target, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._tweenTo( attr, target, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Tweens multiple attributes to target values.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenManyTo\n   * @param {Object} targets\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  tweenManyTo: function(targets, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._tweenManyTo( targets, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Tweens a single attribute from a starting value to the current value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenFrom\n   * @param {String} attr\n   * @param {T} starting\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  tweenFrom: function(attr, starting, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._tweenFrom( attr, starting, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Tweens multiple attributes from starting values to the current values.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenManyFrom\n   * @param {Object} startings\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  tweenManyFrom: function(startings, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._tweenManyFrom( startings, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Tweens an attribute from a starting value to an ending value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tween\n   * @param {String} attr\n   * @param {T} starts\n   * @param {T} ends\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  tween: function(attr, starts, ends, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._tween( attr, starts, ends, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Tweens multiple attributes from starting values to ending values.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenMany\n   * @param {Object} starts\n   * @param {Object} ends\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  tweenMany: function(starts, ends, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._tweenMany( starts, ends, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Moves an attribute relative to its current value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method move\n   * @param {String} attr\n   * @param {T} amount\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  move: function(attr, amount, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._move( attr, amount, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Moves multiple attribute relative to their current value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method moveMany\n   * @param {Object} amounts\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  moveMany: function(amounts, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._moveMany( amounts, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Follows the attribute along the given path definition.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method follow\n   * @param {String} attr\n   * @param {Path|Object|String} path\n   * @param {Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  follow: function(attr, path, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._follow( attr, path, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Converts any existing attributes to the desired units.\n   *\n   * @method convertExistingMany\n   * @param  {Object} units\n   */\n  convertExistingMany: function(units)\n  {\n    if ( units && isObject( units ) )\n    {\n      var current = this.get( units );\n\n      for (var attr in current)\n      {\n        this.frame[ attr ] = current[ attr ];\n      }\n    }\n  },\n\n  /**\n   * Converts any existing attribute to the desired unit.\n   *\n   * @method convertExisting\n   * @param  {String} attr\n   * @param  {String} toUnit\n   */\n  convertExisting: function(attr, toUnit)\n  {\n    if ( toUnit && attr in this.frame && attr in this.units && this.units[ attr ] !== toUnit )\n    {\n      var request = {};\n      request[ attr ] = toUnit;\n\n      this.convertExistingMany( request );\n    }\n  }\n\n});\n\n\n/**\n * A factory for HTML Elements\n */\nfunction FactoryDom()\n{\n  this.cached = {};\n  this.ids = 0;\n  this.elementAttribute = 'anim8';\n  this.priority = 5;\n  this.attributes = {};\n}\n\nClass.extend( FactoryDom, Factory,\n{\n\n  /**\n   * Determines whether the given subject is valid for this factory to create Animators for.\n   *\n   * @param  {any} subject\n   * @return {Boolean}\n   */\n  is: function(subject)\n  {\n    return isElement( subject );\n  },\n\n  /**\n   * Returns an animator given a subject.\n   *\n   * @param  {HTMLElement} subject\n   * @return {anim8.Animator}\n   */\n  animatorFor: function(subject)\n  {\n    var animatorId = subject.getAttribute( this.elementAttribute );\n\n    if (!(animatorId in this.cached))\n    {\n      var animator = new AnimatorDom( subject );\n\n      subject.setAttribute( this.elementAttribute, animatorId = animator.id = ++this.ids );\n\n      animator.factory = this;\n\n      this.cached[animatorId] = animator;\n    }\n\n    return this.cached[ animatorId ];\n  },\n\n  /**\n   * Destroys the animator by unlinking the animator from the subject.\n   *\n   * @param  {anim8.Animator} animator\n   */\n  destroy: function(animator)\n  {\n    delete this.cached[ animator.id ];\n  },\n\n  /**\n   * Returns the attribute descriptor for the given attribute.\n   *\n   * @param  {String} attr\n   * @return {Object}\n   */\n  attribute: function(attr)\n  {\n    var attribute = this.attributes[ attr ];\n\n    if ( !attribute )\n    {\n      attribute = this.attributes[ attr ] = $attribute( attr );\n\n      var calculatorName = attribute.calculator;\n      var calculator = $calculator( calculatorName );\n      var defaultValue = calculator.parse( attribute.defaultValue, calculator.ZERO );\n      var propertyName = coalesce( attribute.property, attr );\n      var property = $property( propertyName );\n      var defaultUnit = attribute.defaultUnit || '';\n\n      attribute.calculatorName = calculatorName;\n      attribute.calculator = calculator;\n      attribute.defaultValue = defaultValue;\n      attribute.name = attr;\n      attribute.propertyName = propertyName;\n      attribute.property = property;\n      attribute.defaultUnit = defaultUnit;\n      attribute.parse = function(value, ignoreRelative) {\n        return this.calculator.parse( value, this.defaultValue, ignoreRelative );\n      };\n      attribute.cloneDefault = function() {\n        return this.calculator.clone( this.defaultValue );\n      };\n    }\n\n    return attribute;\n  }\n\n});\n\nvar browser =\n{\n  IE: (function() {\n    if (!(window.ActiveXObject) && \"ActiveXObject\" in window) { return 11; }\n    if (!document.all) { return false; }\n    if (!document.compatMode) { return 5; }\n    if (!window.XMLHttpRequest) { return 6; }\n    if (!document.querySelector) { return 7; }\n    if (!document.addEventListener) { return 8; }\n    if (!window.atob) { return 9; }\n    return 10;\n  })()\n};\n\nvar Matrix = {\n\n  identity: function() {\n    return {\n      m11: 1.0, m12: 0.0, m21: 0.0, m22: 1.0\n    };\n  },\n\n  multiply: function(a, b) {\n    return {\n      m11: (a.m11 * b.m11) + (a.m12 * b.m21),\n      m22: (a.m21 * b.m12) + (a.m22 * b.m22),\n      m21: (a.m21 * b.m11) + (a.m22 * b.m21),\n      m12: (a.m11 * b.m12) + (a.m12 * b.m22)\n    };\n  },\n\n  rotate: function(radians) {\n    var cos = Math.cos( radians );\n    var sin = Math.sin( radians );\n    return {\n      m11: cos,\n      m12: -sin,\n      m21: sin,\n      m22: cos\n    };\n  },\n\n  scale: function(scaleX, scaleY) {\n    return {\n      m11: scaleX,\n      m12: 0.0,\n      m21: 0.0,\n      m22: scaleY\n    };\n  },\n\n  skew: function(skewX, skewY) {\n    return {\n      m11: 1.0,\n      m12: Math.tan( skewX ),\n      m21: Math.tan( skewY ),\n      m22: 1.0\n    };\n  },\n\n  transform: function(matrix, x, y) {\n    return {\n      x: matrix.m11 * x + matrix.m12 * y,\n      y: matrix.m21 * x + matrix.m22 * y\n    };\n  },\n\n  adjustment: function(matrix, w, h) {\n    var x0 = w * matrix.m11;\n    var x1 = h * matrix.m12;\n    var x2 = w * matrix.m11 + h * matrix.m12;\n    var xmin = Math.min( x0, Math.min( x1, Math.min( x2, 0 ) ) );\n    var xmax = Math.max( x0, Math.max( x1, Math.max( x2, 0 ) ) );\n\n    var y0 = w * matrix.m21;\n    var y1 = h * matrix.m22;\n    var y2 = w * matrix.m21 + h * matrix.m22;\n    var ymin = Math.min( y0, Math.min( y1, Math.min( y2, 0 ) ) );\n    var ymax = Math.max( y0, Math.max( y1, Math.max( y2, 0 ) ) );\n\n    return {\n      x: xmax - xmin,\n      y: ymax - ymin\n    };\n  }\n\n};\n\nfunction concatenateStyle(anim, style, value)\n{\n  if ( isDefined( anim.styles[ style ] ) )\n  {\n    anim.styles[ style ] += ' ' + value;\n  }\n  else\n  {\n    anim.styles[ style ] = value;\n  }\n}\n\nfunction setProperty(attr, property)\n{\n  var attribute = Attributes[ attr ];\n\n  if ( isString( attribute.property ) || !isDefined( attribute.property ) )\n  {\n    attribute.property = property;\n  }\n  else\n  {\n    attribute.propertyName = property;\n    attribute.property = $property( property );\n  }\n}\n\n/* transform, blur, opacity, margin top & left IE <= 8 */\nif ( browser.IE && browser.IE <= 8 )\n{\n  Properties.ieTransform =\n  {\n    presettings:\n    {\n      width: {\n        savedAs: 'width',\n        property: 'width',\n        relativeTo: 'parentWidth',\n        defaultProperty: 'offsetWidth',\n        toUnit: 'px'\n      },\n      height: {\n        savedAs: 'height',\n        property: 'height',\n        relativeTo: 'parentHeight',\n        defaultProperty: 'offsetHeight',\n        toUnit: 'px'\n      },\n      rotate: {\n        savedAs: 'rotate',\n        property: 'rotate',\n        toUnit: 'rad'\n      },\n      rotate3d: {\n        savedAs: 'rotate',\n        property: 'rotate3d',\n        subproperty: 'angle',\n        toUnit: 'rad'\n      },\n      skewX: {\n        savedAs: 'skewX',\n        property: 'skewX',\n        toUnit: 'rad'\n      },\n      skew2dX: {\n        savedAs: 'skewX',\n        property: 'skew',\n        subproperty: 'x',\n        toUnit: 'rad'/*,\n        remove: true*/\n      },\n      skewY: {\n        savedAs: 'skewY',\n        property: 'skewY',\n        toUnit: 'rad'\n      },\n      skew2dY: {\n        savedAs: 'skewY',\n        property: 'skew',\n        subproperty: 'y',\n        toUnit: 'rad'/*,\n        remove: true*/\n      },\n      translateX: {\n        savedAs: 'translateX',\n        property: 'translateX',\n        relativeTo: 'width',\n        toUnit: 'px'\n      },\n      translate2dX: {\n        savedAs: 'translateX',\n        property: 'translate',\n        subproperty: 'x',\n        toUnit: 'px',\n        relativeTo: 'width'\n      },\n      translate3dX: {\n        savedAs: 'translateX',\n        property: 'translate3d',\n        subproperty: 'x',\n        toUnit: 'px',\n        relativeTo: 'width'/*,\n        remove: true*/\n      },\n      translateY: {\n        savedAs: 'translateY',\n        property: 'translateY',\n        relativeTo: 'height',\n        toUnit: 'px'\n      },\n      translate2dY: {\n        savedAs: 'translateY',\n        property: 'translate',\n        subproperty: 'y',\n        toUnit: 'px',\n        relativeTo: 'height'\n      },\n      translate3dY: {\n        savedAs: 'translateY',\n        property: 'translate3d',\n        subproperty: 'y',\n        toUnit: 'px',\n        relativeTo: 'height'/*,\n        remove: true*/\n      },\n      scaleX: {\n        savedAs: 'scaleX',\n        property: 'scaleX'\n      },\n      scale2dX: {\n        savedAs: 'scaleX',\n        property: 'scale',\n        subproperty: 'x'\n      },\n      scale3dX: {\n        savedAs: 'scaleX',\n        property: 'scale3d',\n        subproperty: 'x'/*,\n        remove: true*/\n      },\n      scaleY: {\n        savedAs: 'scaleY',\n        property: 'scaleY'\n      },\n      scale2dY: {\n        savedAs: 'scaleY',\n        property: 'scale',\n        subproperty: 'y'\n      },\n      scale3dY: {\n        savedAs: 'scaleY',\n        property: 'scale3d',\n        subproperty: 'y'/*,\n        remove: true*/\n      },\n      originX: {\n        savedAs: 'originX',\n        property: 'originX',\n        toUnit: '%',\n        relativeTo: 'width'\n      },\n      origin2dX: {\n        savedAs: 'originX',\n        property: 'origin',\n        subproperty: 'x',\n        toUnit: '%',\n        relativeTo: 'width'/*,\n        remove: true*/\n      },\n      originY: {\n        savedAs: 'originY',\n        property: 'originY',\n        toUnit: '%',\n        relativeTo: 'height'\n      },\n      origin2dY: {\n        savedAs: 'originY',\n        property: 'origin',\n        subproperty: 'y',\n        toUnit: '%',\n        relativeTo: 'height'/*,\n        remove: true*/\n      },\n      marginLeft: {\n        savedAs: 'marginLeft',\n        property: 'marginLeft',\n        toUnit: 'px',\n        relativeTo: 'parentWidth'\n      },\n      marginTop: {\n        savedAs: 'marginTop',\n        property: 'marginTop',\n        toUnit: 'px',\n        relativeTo: 'parentWidth'\n      },\n      blur: {\n        savedAs: 'blur',\n        property: 'blur',\n        toUnit: 'px',\n        relativeTo: 'parentWidth',\n        remove: true\n      },\n      opacity: {\n        savedAs: 'opacity',\n        property: 'opacity',\n        remove: true\n      }\n    },\n    get: function(e, anim)\n    {\n      var settings = this.presettings;\n\n      Properties.marginLeft.get( e, anim );\n      Properties.marginTop.get( e, anim );\n\n      this.getFramed( e, anim, settings.rotate );\n      this.getFramed( e, anim, settings.rotate3d );\n      this.getFramed( e, anim, settings.skewX );\n      this.getFramed( e, anim, settings.skewY );\n      this.getFramed( e, anim, settings.skew2dX );\n      this.getFramed( e, anim, settings.skew2dY );\n      this.getFramed( e, anim, settings.translateX );\n      this.getFramed( e, anim, settings.translate2dX );\n      this.getFramed( e, anim, settings.translate3dX );\n      this.getFramed( e, anim, settings.translateY );\n      this.getFramed( e, anim, settings.translate2dY );\n      this.getFramed( e, anim, settings.translate3dY );\n      this.getFramed( e, anim, settings.scaleX );\n      this.getFramed( e, anim, settings.scale2dX );\n      this.getFramed( e, anim, settings.scale3dX );\n      this.getFramed( e, anim, settings.scaleY );\n      this.getFramed( e, anim, settings.scale2dY );\n      this.getFramed( e, anim, settings.scale3dY );\n      this.getFramed( e, anim, settings.originX );\n      this.getFramed( e, anim, settings.originY );\n      this.getFramed( e, anim, settings.origin2dX );\n      this.getFramed( e, anim, settings.origin2dY );\n\n      this.getFramed( e, anim, settings.blur );\n      this.getFramed( e, anim, settings.opacity );\n    },\n    getFramed: function(e, flash, def)\n    {\n      var anim = coalesce( flash.source, flash );\n      var attr = def.property;\n      var value = anim.frame[ attr ];\n\n      if ( isBoolean( flash.animating[ attr ] ) && isDefined( value ) )\n      {\n        var fromUnit = def.toUnit;\n        var toUnit = flash.units[ attr ];\n\n        if ( def.subproperty )\n        {\n          var attribute = anim.getAttribute( attr );\n\n          if ( !flash.frame[ attr ] )\n          {\n            flash.frame[ attr ] = attribute.cloneDefault();\n          }\n\n          var converted = value[ def.subproperty ];\n\n          if ( fromUnit !== toUnit )\n          {\n            converted = $convert( e, converted + fromUnit, toUnit, def.relativeTo );\n          }\n\n          if ( converted !== false )\n          {\n            flash.frame[ attr ][ def.subproperty ] = converted;\n            flash.animating[ attr ] = true;\n          }\n        }\n        else\n        {\n          var converted = value;\n\n          if ( fromUnit !== toUnit )\n          {\n            converted = $convert( e, converted + fromUnit, toUnit, def.relativeTo );\n          }\n\n          if ( converted !== false )\n          {\n            flash.frame[ attr ] = converted;\n            flash.animating[ attr ] = true;\n          }\n        }\n      }\n\n      return ( flash.animating[ attr ] === true );\n    },\n    resolveRelativeTo: function(anim, relativeTo)\n    {\n      var cached = anim.cached[ relativeTo ];\n\n      if ( isNumber( cached ) )\n      {\n        return cached * 0.01;\n      }\n\n      return relativeTo;\n    },\n    cacheConverted: function(e, anim, def)\n    {\n      var value = anim.frame[ def.property ];\n      var canConvert = isDefined( value );\n\n      if ( canConvert )\n      {\n        var valueUnit = anim.units[ def.property ];\n        var actualValue = ( def.subproperty ? value[ def.subproperty ] : value );\n\n        if ( valueUnit !== def.toUnit )\n        {\n          var united = actualValue + valueUnit;\n          var relativeTo = this.resolveRelativeTo( anim, def.relativeTo );\n\n          actualValue = $convert( e, united, def.toUnit, relativeTo );\n        }\n\n        if ( actualValue !== false )\n        {\n          anim.cached[ def.savedAs ] = actualValue;\n        }\n        else\n        {\n          canConvert = false;\n        }\n      }\n      else if ( def.remove )\n      {\n        delete anim.cached[ def.savedAs ];\n      }\n\n      return canConvert;\n    },\n    cacheValue: function(e, anim, def)\n    {\n      var value = anim.frame[ def.property ];\n      var hasValue = isDefined( value );\n\n      if ( hasValue )\n      {\n        anim.cached[ def.savedAs ] = ( def.subproperty ? value[ def.subproperty ] : value );\n      }\n      else if ( def.remove )\n      {\n        delete anim.cached[ def.savedAs ];\n      }\n\n      return hasValue;\n    },\n    cacheDimension: function(e, anim, def)\n    {\n      if ( !this.cacheConverted( e, anim, def ) )\n      {\n        var computedValue = $style( e, def.property );\n\n        anim.cached[ def.savedAs ] = $convert( e, computedValue, 'px', def.relativeTo ) || e[ def.defaultProperty ];\n      }\n    },\n    cachedOrDefault: function(e, anim, value, attribute, toUnit, relativeTo)\n    {\n      if ( isDefined( value ) )\n      {\n        return value;\n      }\n      if ( attribute.defaultUnit === toUnit )\n      {\n        return attribute.defaultValue;\n      }\n\n      relativeTo = this.resolveRelativeTo( anim, relativeTo );\n\n      return $convert( e, attribute.defaultValue + attribute.defaultUnit, toUnit, relativeTo );\n    },\n    preset: function(e, anim)\n    {\n      var cached = anim.cached;\n      var settings = this.presettings;\n      var attrs = Attributes;\n\n      this.cacheDimension( e, anim, settings.width );\n\n      this.cacheDimension( e, anim, settings.height );\n\n      if ( !this.cacheConverted( e, anim, settings.rotate ) )\n      {\n        this.cacheConverted( e, anim, settings.rotate3d );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.skewX ) )\n      {\n        this.cacheConverted( e, anim, settings.skew2dX );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.skewY ) )\n      {\n        this.cacheConverted( e, anim, settings.skew2dY );\n      }\n\n      if ( isDefined( cached.skewX ) || isDefined( cached.skewY ) )\n      {\n        cached.skewX = this.cachedOrDefault( e, anim, cached.skewX, attrs.skewX, 'rad' );\n        cached.skewY = this.cachedOrDefault( e, anim, cached.skewY, attrs.skewY, 'rad' );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.translateX ) )\n      {\n        if ( !this.cacheConverted( e, anim, settings.translate2dX ) )\n        {\n          this.cacheConverted( e, anim, settings.translate3dX );\n        }\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.translateY ) )\n      {\n        if ( !this.cacheConverted( e, anim, settings.translate2dY ) )\n        {\n          this.cacheConverted( e, anim, settings.translate3dY );\n        }\n      }\n\n      if ( isDefined( cached.translateX ) || isDefined( cached.translateY ) )\n      {\n        cached.translateX = this.cachedOrDefault( e, anim, cached.translateX, attrs.translateX, 'px', 'width' );\n        cached.translateY = this.cachedOrDefault( e, anim, cached.translateY, attrs.translateY, 'px', 'height' );\n      }\n\n      if ( !this.cacheValue( e, anim, settings.scaleX ) )\n      {\n        if ( !this.cacheValue( e, anim, settings.scale2dX ) )\n        {\n          this.cacheValue( e, anim, settings.scale3dX );\n        }\n      }\n\n      if ( !this.cacheValue( e, anim, settings.scaleY ) )\n      {\n        if ( !this.cacheValue( e, anim, settings.scale2dY ) )\n        {\n          this.cacheValue( e, anim, settings.scale3dY );\n        }\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.originX ) )\n      {\n        this.cacheConverted( e, anim, settings.origin2dX );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.originY ) )\n      {\n        this.cacheConverted( e, anim, settings.origin2dY );\n      }\n\n      cached.originX = this.cachedOrDefault( e, anim, cached.originX, attrs.originX, '%', 'width' );\n      cached.originY = this.cachedOrDefault( e, anim, cached.originY, attrs.originY, '%', 'height' );\n\n      if ( !isDefined( cached.baseMarginLeft ) )\n      {\n        var margins = anim.get({\n          marginLeft: 'px',\n          marginTop: 'px'\n        });\n\n        cached.baseMarginLeft = margins.marginLeft || 0;\n        cached.baseMarginTop = margins.marginTop || 0;\n      }\n\n      if ( this.cacheConverted( e, anim, settings.marginLeft ) )\n      {\n        cached.marginLeft -= cached.baseMarginLeft;\n      }\n      else\n      {\n        cached.marginLeft = 0;\n      }\n\n      if ( this.cacheConverted( e, anim, settings.marginTop ) )\n      {\n        cached.marginTop -= cached.baseMarginTop;\n      }\n      else\n      {\n        cached.marginTop = 0;\n      }\n\n      this.cacheValue( e, anim, settings.opacity );\n\n      this.cacheConverted( e, anim, settings.blur );\n    },\n    unset: function(e, anim, attr)\n    {\n      if ( attr === true )\n      {\n        e.style.filter = '';\n        e.style.marginLeft = (anim.cached.baseMarginLeft || 0) + 'px';\n        e.style.marginTop = (anim.cached.baseMarginTop || 0) + 'px';\n\n        anim.cached = {};\n      }\n    },\n    set: function(e, anim)\n    {\n      var cached = anim.cached;\n      var attrs = Attributes;\n      var w = cached.width;\n      var h = cached.height;\n      var anchorX = cached.originX * 0.01;\n      var anchorY = cached.originY * 0.01;\n      var dx = 0;\n      var dy = 0;\n      var matrix = Matrix.identity();\n\n      if ( isDefined( cached.scaleX ) || isDefined( cached.scaleY ) )\n      {\n        matrix = Matrix.multiply( matrix, Matrix.scale(\n          coalesce( cached.scaleX, attrs.scaleX.defaultValue ),\n          coalesce( cached.scaleY, attrs.scaleY.defaultValue )\n        ));\n      }\n\n      if ( isDefined( cached.skewX ) )\n      {\n        matrix = Matrix.multiply( matrix, Matrix.skew( cached.skewX, cached.skewY ) );\n      }\n\n      if ( isDefined( cached.rotate ) )\n      {\n        matrix = Matrix.multiply( matrix, Matrix.rotate( cached.rotate ) );\n      }\n\n      if ( isDefined( cached.translateX ) )\n      {\n        dx += cached.translateX;\n        dy += cached.translateY;\n      }\n\n      // Calculate the new size of the element based on the matrix. We need to\n      // adjust by the difference because IE is special.\n      var newSize = Matrix.adjustment( matrix, w, h );\n      dx += (w - newSize.x) * 0.5;\n      dy += (h - newSize.y) * 0.5;\n\n      // Adjust for a non-centered transformation\n      var hw = w * 0.5;\n      var hh = h * 0.5;\n      var origin = Matrix.transform( matrix, hw, hh );\n      dx += (hw - origin.x) * (anchorX * 2 - 1);\n      dy += (hh - origin.y) * (anchorY * 2 - 1);\n\n      // If margin is already specified, add it to the new margin value.\n      dx += cached.marginLeft + cached.baseMarginLeft;\n      dy += cached.marginTop + cached.baseMarginTop;\n\n      // Set the margin to account for a lack of translation.\n      anim.styles.marginLeft = dx + 'px';\n      anim.styles.marginTop = dy + 'px';\n\n      // The array of filter operations\n      var filters = [];\n\n      // Transformations\n      if ( matrix.m11 !== 1.0 || matrix.m12 !== 0.0 || matrix.m21 !== 0.0 || matrix.m22 !== 1.0 )\n      {\n        var transformFilter = 'progid:DXImageTransform.Microsoft.Matrix(SizingMethod=\\'auto expand\\'' +\n          ', M11=' + matrix.m11 + ', M12=' + matrix.m12 +\n          ', M21=' + matrix.m21 + ', M22=' + matrix.m22 + ')';\n\n        filters.push( transformFilter );\n      }\n\n      // Opacity\n      if ( isNumber( cached.opacity ) && !isNaN( cached.opacity )  )\n      {\n        var opacityFilter = 'progid:DXImageTransform.Microsoft.Alpha(Opacity=' + ( cached.opacity * 100 ) + ')';\n\n        filters.push( opacityFilter );\n      }\n\n      // Blur\n      if ( isNumber( cached.blur ) && !isNaN( cached.blur ) )\n      {\n        var blurFilter = 'progid:DXImageTransform.Microsoft.Blur(PixelRadius=\\'' + ( cached.blur ) + 'px\\')';\n\n        filters.push( blurFilter );\n      }\n\n      // Set the filter properties!\n      anim.styles.filter = filters.join( ' ' );\n\n      // Force layout\n      anim.styles.zoom = 1;\n    }\n  };\n\n  var attributes = [\n    'marginLeft', 'marginTop',\n    'blur',\n    'opacity',\n    'origin', 'originX', 'originY',\n    'translate', 'translateX', 'translateY', 'translateZ', 'translate3d',\n    'rotate', 'rotate3d',\n    'skew', 'skewX', 'skewY',\n    'scale', 'scaleX', 'scaleY', 'scaleZ', 'scale3d'\n  ];\n\n  for ( var i = 0; i < attributes.length; i++ )\n  {\n    setProperty( attributes[ i ], 'ieTransform' );\n  }\n}\n\n/* minWidth < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.minWidth.set = function(e, anim)\n  {\n    anim.styles.width = 'expression( this.scrollWidth \\< ' + (anim.frame.minWidth + 1) + ' ? \"' + anim.frame.minWidth + anim.units.minWidth + '\" : \"auto\")';\n  };\n}\n\n/* maxWidth < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.maxWidth.set = function(e, anim)\n  {\n    anim.styles.width = 'expression( this.scrollWidth > ' + (anim.frame.maxWidth - 1) + ' ? \"' + anim.frame.maxWidth + anim.units.maxWidth + '\" : \"auto\")';\n  };\n}\n\n/* minHeight < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.minHeight.set = function(e, anim)\n  {\n    anim.styles.height = 'expression( this.scrollHeight \\< ' + (anim.frame.minHeight + 1) + ' ? \"' + anim.frame.minHeight + anim.units.minHeight + '\" : \"auto\")';\n  };\n}\n/* maxHeight < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.maxHeight.set = function(e, anim)\n  {\n    anim.styles.height = 'expression( this.scrollHeight > ' + (anim.frame.maxHeight - 1) + ' ? \"' + anim.frame.maxHeight + anim.units.maxHeight + '\" : \"auto\")';\n  };\n}\n\n\n\n  // Register Factory\n  anim8.Factories['default'] = anim8.Factories['dom'] = new FactoryDom();\n\n  // Classes\n  anim8.AnimatorDom = AnimatorDom;\n  anim8.FactoryDom = FactoryDom;\n\n  // Functions\n  anim8.isElement = isElement;\n\n  // Variables\n  anim8.browser = browser;\n  anim8.Matrix = Matrix;\n\n  // Namespace\n  anim8.dom = {\n    Attributes:           Attributes,\n    attribute:            $attribute,\n    convert:              $convert,\n    style:                $style,\n    parseValue:           $parseValue,\n    property:             $property,\n    prefix:               $prefix,\n    concatenateStyle:     concatenateStyle,\n    setProperty:          setProperty,\n    unset:                unset,\n    factory:              factory,\n    factoryDerivable:     factoryDerivable,\n    factoryColor:         factoryColor\n  };\n\n  return anim8;\n\n}));\n"],"sourceRoot":"/source/"}