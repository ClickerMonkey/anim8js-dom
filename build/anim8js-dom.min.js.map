{"version":3,"sources":["anim8js-dom.min.js"],"names":["root","factory","define","amd","anim8","module","exports","require","global","this","window","override","target","source","prop","isElement","x","HTMLElement","nodeType","nodeName","unset","e","anim","attr","property","css","clearedValue","style","frame","set","styles","$attribute","isObject","isDefined","defaultValue","isString","Attributes","nm","relativeTo","get","animating","$style","converted","$convert","units","value","factoryDerivable","deriver","isFunction","factoryColor","parsed","Color","parse","format","$property","Properties","AnimatorDom","subject","reset","properties","FastMap","propertiesPreset","attributeToProperty","cached","styled","stylesUpdated","FactoryDom","ids","elementAttribute","priority","attributes","concatenateStyle","setProperty","attribute","propertyName","Animator","Factory","Class","Easings","EasingTypes","isNumber","isBoolean","coalesce","clamp","toArray","$calculator","calculator","document","hyphenated","hyphenize","str","key","replace","letter","toLowerCase","currentStyle","defaultView","getComputedStyle","getPropertyValue","$prefix","a","createElement","prefixes","i","length","$parseValue","regex","exec","parseFloat","unit","toPixels","baseValue","baseUnit","defaultRate","body","div","appendChild","width","pixels","offsetWidth","removeChild","getFontSize","notUnit","fontSize","getConverterScale","conversions","px","variables","parentWidth","parentNode","scrollWidth","parentHeight","scrollHeight","height","offsetHeight","parentFontSize","htmlFontSize","htmlElement","getElementsByTagName","rad","Math","PI","to","given","converter","from","toUnit","fromUnit","converter1","converter2","combined","ease","quad","out","inout","linear","padding","defaultUnit","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","outlineWidth","outlineOffset","textIndent","borderSpacing","lineHeight","letterSpacing","origin","y","originX","originY","opacity","zIndex","minWidth","maxWidth","minHeight","maxHeight","angle","distance","orbitOffset","top","right","bottom","left","center","centerX","centerY","blur","sepia","brightness","grayscale","contrast","invert","saturation","hueRotate","rotate","rotate3d","z","translate","translateX","translateY","translateZ","translate3d","scale","scaleX","scaleY","scaleZ","scale3d","skew","skewX","skewY","backface","visibility","backgroundColor","color","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderColor","outlineColor","textShadowX","textShadowY","textShadowPosition","textShadowBlur","textShadowColor","shadowX","shadowY","shadowPosition","shadowBlur","shadowSpread","shadowColor","shadowInset","noop","offsetTop","offsetLeft","floor","transformOrigin","keywords","setOriginAttribute","setOrigin","split","originZ","valueOr","transform","desiredUnit","getAttribute","getter1d","getter2d","getter3d","getter4d","setter1d","setter2d","setter3d","setter4d","combine","ax","ay","bx","by","ascl","bscl","place1d","place2d","valueX","valueY","relativeToX","relativeToY","place3d","valueZ","relativeToZ","place4d","valueRotate","relativeToRotate","regexes","rotateX","rotateY","rotateZ","matrix","getters","setters","props","values","attrs","keys","indexOf","matrixParsed","b","c","d","tx","ty","sqrt","atan2","transforms","push","join","isNaN","shadow","parsePart","updating","parts","inset","shift","spread","parsedX","parsedY","textShadow","textShadowSpread","filter","methods","saturate","patterns","RegExp","filters","cx","cy","ccx","ccy","preset","rw","rh","updated","orbit","DEGREE_TO_RADIAN","RADIAN_TO_DEGREE","ox","oy","dx","dy","cunit","cox","coy","orbitX","orbitY","originUnit","cos","sin","extend","preupdate","now","aa","attrimatorsAdded","attrimator","hasComputed","setDefault","start","presets","trigger","update","_update","getStyles","apply","trimAttrimators","placeAttrimator","_placeAttrimator","put","input","restore","attrimators","remove","flash","other","subproperty","applyProperties","has","cloneDefault","ref","animator","request","current","tweenTo","options","cache","convertExisting","_tweenTo","tweenManyTo","targets","convertExistingMany","_tweenManyTo","tweenFrom","starting","_tweenFrom","tweenManyFrom","startings","_tweenManyFrom","tween","starts","ends","_tween","tweenMany","_tweenMany","move","amount","_move","moveMany","amounts","_moveMany","follow","path","_follow","is","animatorFor","animatorId","setAttribute","id","destroy","calculatorName","ZERO","name","clone","browser","IE","all","compatMode","XMLHttpRequest","querySelector","addEventListener","atob","Matrix","identity","m11","m12","m21","m22","multiply","radians","tan","adjustment","w","h","x0","x1","x2","xmin","min","xmax","max","y0","y1","y2","ymin","ymax","ieTransform","presettings","savedAs","defaultProperty","skew2dX","skew2dY","translate2dX","translate3dX","translate2dY","translate3dY","scale2dX","scale3dX","scale2dY","scale3dY","origin2dX","origin2dY","settings","getFramed","def","resolveRelativeTo","cacheConverted","canConvert","valueUnit","actualValue","united","cacheValue","hasValue","cacheDimension","computedValue","cachedOrDefault","baseMarginLeft","margins","baseMarginTop","anchorX","anchorY","newSize","hw","hh","transformFilter","opacityFilter","blurFilter","zoom","Factories","dom","convert","parseValue","prefix"],"mappings":"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","file":"anim8js-dom.min.js","sourcesContent":["/* anim8js-dom 1.0.1 - anim8 your HTML elements by Philip Diffenderfer */\n// UMD (Universal Module Definition)\n(function (root, factory)\n{\n  if (typeof define === 'function' && define.amd) // jshint ignore:line\n  {\n    // AMD. Register as an anonymous module.\n    define(['anim8'], function(anim8) { // jshint ignore:line\n      return factory(anim8, root);\n    });\n  }\n  else if (typeof module === 'object' && module.exports)  // jshint ignore:line\n  {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require('anim8'), global);  // jshint ignore:line\n  }\n  else\n  {\n    // Browser globals (root is window)\n    factory(root.anim8, root);\n  }\n}(this, function(anim8, window)\n{\n\n  var FastMap = anim8.FastMap;\n  var Animator = anim8.Animator;\n  var Factory = anim8.Factory;\n  var Class = anim8.Class;\n  var Color = anim8.Color;\n  var Easings = anim8.Easings;\n  var EasingTypes = anim8.EasingTypes;\n  var isFunction = anim8.isFunction;\n  var isString = anim8.isString;\n  var isNumber = anim8.isNumber;\n  var isDefined = anim8.isDefined;\n  var isObject = anim8.isObject;\n  var isBoolean = anim8.isBoolean;\n  var coalesce = anim8.coalesce;\n  var clamp = anim8.clamp;\n  var toArray = anim8.toArray;\n\n  var $calculator = anim8.calculator;\n\n  var HTMLElement = window.HTMLElement;\n  var document = window.document;\n\n  function override(target, source)\n  {\n    for (var prop in source)\n    {\n      target[ prop ] = source[ prop ];\n    }\n  }\n\n\n/**\n * Returns true if the given variable is an HTML element.\n *\n * @method anim8.isElement\n * @param {Any} x\n * @return {Boolean}\n */\nfunction isElement(x)\n{\n  return typeof HTMLElement === \"object\" ? x instanceof HTMLElement :\n  x && typeof x === \"object\" && x !== null && x.nodeType === 1 && typeof x.nodeName === \"string\";\n}\n\n\nfunction unset( e, anim, attr, property, css, clearedValue )\n{\n  if ( attr === true )\n  {\n    e.style[ css ] = clearedValue;\n  }\n  else\n  {\n    delete anim.frame[ attr ];\n\n    property.set( e, anim );\n\n    e.style[ css ] = anim.styles[ css ];\n  }\n}\n\n\n/**\n * Computes the desired style of the given element and returns it as a string.\n * The style given must be in hyphenated format like so:\n * anim8.dom.style( element, 'font-size' ) = '12px'\n *\n * @param {HTMLElement} e\n * @param {String} style\n * @return {String}\n */\nvar $style = (function()\n{\n  var hyphenated = {};\n\n  var hyphenize = function(str)\n  {\n    if ( str in hyphenated )\n    {\n      return hyphenated[ str ];\n    }\n\n    var key = str;\n\n    str = str.replace(/[a-z][A-Z]/g, function(str, letter)\n    {\n     return str[0] + '-' + str[1].toLowerCase();\n    });\n\n    str = str.replace(/^Webkit/, '-webkit');\n    str = str.replace(/^Moz/, '-moz');\n    str = str.replace(/^Ms/, '-ms');\n    str = str.replace(/^O/, '-o');\n    str = str.replace(/^Khtml/, '-khtml');\n\n    hyphenated[ key ] = str;\n\n    return str;\n  };\n\n  return function(e, style)\n  {\n    if (e.currentStyle)\n    {\n      return e.currentStyle[ style ];\n    }\n    else if (document.defaultView && document.defaultView.getComputedStyle)\n    {\n      return document.defaultView.getComputedStyle( e, null ).getPropertyValue( hyphenize( style ) );\n    }\n    else\n    {\n      return e.style[ style ];\n    }\n  };\n\n})();\n\n/**\n * Given an array of styles this will return the first one that is present on elements in the current browser.\n *\n * @param {Array} prefixes\n * @return {String|false}\n */\nvar $prefix = (function()\n{\n  var a = document.createElement('a');\n\n  return function(prefixes)\n  {\n    for (var i = 0; i < prefixes.length; i++)\n    {\n      if ( isDefined( a.style[ prefixes[ i ] ] ) )\n      {\n        return prefixes[i];\n      }\n    }\n    return false;\n  };\n\n})();\n\n/**\n * Parses the string for a value and a unit.\n *\n * @param {String} value\n * @return {Object|false}\n */\nvar $parseValue = (function()\n{\n  var regex = /(-?\\d*(\\.\\d+)|-?\\d+)(px|em|%|vw|ex|cm|mm|in|pt|pc|deg|rad)?/;\n\n  return function(x)\n  {\n    var parsed = regex.exec( x );\n\n    if (parsed)\n    {\n      return {\n        value: parseFloat( parsed[1] ),\n        unit: parsed[3]\n      };\n    }\n\n    return false;\n  };\n})();\n\n\n/**\n * Converts one unit to another for a given element.\n *\n * For Example: anim8.dom.convert( element, '100px', '%', 'parentWidth' )\n *    returns how much percent 100px relativeTo parentWidth of the given element\n *\n * @param {HTMLElement} e\n * @param {String} from\n * @param {String} toUnit\n * @param {String|Number} relativeTo\n * @return {Number|false}\n */\nvar $convert = (function()\n{\n  /**\n   * Calculators how many pixels a given value & unit is.\n   *\n   * For Example: anim8.toPixels( 100, 'in' )\n   *    returns how many pixels are in 1 inch, with up to 2 decimal points of accuracy.\n   */\n  var toPixels = function(baseValue, baseUnit, defaultRate)\n  {\n    if ( document.body )\n    {\n      try\n      {\n        var div = document.createElement('div');\n        document.body.appendChild( div );\n        div.style.width = baseValue + baseUnit;\n        var pixels = (div.offsetWidth / baseValue);\n        document.body.removeChild( div );\n\n        return pixels || defaultRate;\n      }\n      catch (e)\n      {\n        // Do nothing\n      }\n    }\n\n    return defaultRate;\n  };\n\n  var getFontSize = function(e, notUnit, relativeTo)\n  {\n    var fontSize = $style( e, 'fontSize' );\n    var parsed = $parseValue( fontSize );\n\n    if ( !parsed || parsed.unit === notUnit )\n    {\n      return 12;\n    }\n\n    if ( parsed.unit === 'px' )\n    {\n      return parsed.value;\n    }\n\n    return getConverterScale( e, conversions[ parsed.unit ].px, relativeTo );\n  };\n\n  var variables = {};\n\n  variables.parentWidth = function(e)\n  {\n    return e.parentNode.scrollWidth;\n  };\n  variables.parentHeight = function(e)\n  {\n    return e.parentNode.scrollHeight;\n  };\n  variables.width = function(e)\n  {\n    return e.offsetWidth;\n  };\n  variables.height = function(e)\n  {\n    return e.offsetHeight;\n  };\n  variables.fontSize = function(e)\n  {\n    return getFontSize( e, '%' );\n  };\n  variables.parentFontSize = function(e)\n  {\n    return getFontSize( e.parentNode, '%' );\n  };\n  variables.htmlFontSize = function(e)\n  {\n    var htmlElement = document.getElementsByTagName(\"html\")[0];\n\n    return getFontSize( htmlElement, '%' );\n  };\n\n  var conversions = {};\n\n  conversions['pt']  = { px: toPixels( 100, 'pt', 1 ) };\n  conversions['in']  = { px: toPixels( 100, 'in', 72 ) };\n  conversions['cm']  = { px: toPixels( 1000, 'cm', 72 / 2.54 ) };\n  conversions['mm']  = { px: toPixels( 100000, 'mm', 72 / 25.4 ) };\n  conversions['vw']  = { px: toPixels( 1000, 'vw', 1024 * 0.01 ) };\n  conversions['deg'] = { rad: Math.PI / 180.0 };\n\n  conversions['em'] =\n  {\n    px: function(e, relativeTo)\n    {\n      return getFontSize( e, 'em', relativeTo );\n    }\n  };\n\n  conversions['rem'] =\n  {\n    px: function(e, relativeTo)\n    {\n      var htmlElement = document.getElementsByTagName(\"html\")[0];\n\n      return getFontSize( htmlElement, 'rem', relativeTo );\n    }\n  };\n\n  conversions['%'] =\n  {\n    px: function(e, relativeTo)\n    {\n      if ( isNumber( relativeTo ) )\n      {\n        return relativeTo;\n      }\n      if ( relativeTo in variables )\n      {\n        return variables[ relativeTo ]( e ) * 0.01;\n      }\n\n      return 1.0;\n    }\n  };\n\n  // Populate conversions going other way.\n  for (var unit in conversions)\n  {\n    for (var to in conversions[ unit ])\n    {\n      if ( !(to in conversions) )\n      {\n        conversions[ to ] = {};\n      }\n\n      if ( !(unit in conversions[ to ]) )\n      {\n        var given = conversions[ unit ][ to ];\n\n        if ( isNumber( given ) )\n        {\n          conversions[ to ][ unit ] = 1.0 / given;\n        }\n        if ( isFunction( given ) )\n        {\n          conversions[ to ][ unit ] = (function(converter)\n          {\n            return function(e, relativeTo)\n            {\n              return 1.0 / converter( e, relativeTo );\n            };\n          })( given );\n        }\n      }\n    }\n  }\n\n  // Given an element, convert, and relativeTo - return the number we need to multiply by.\n  var getConverterScale = function(e, converter, relativeTo)\n  {\n    if ( isNumber( converter ) )\n    {\n      return converter;\n    }\n    else if ( isFunction( converter ) )\n    {\n      return converter( e, relativeTo );\n    }\n\n    return 1.0;\n  };\n\n  return function(e, from, toUnit, relativeTo)\n  {\n    if ( isNumber( from ) )\n    {\n      return from;\n    }\n\n    var parsed = $parseValue( from );\n\n    if ( !parsed )\n    {\n      return false;\n    }\n\n    var value = parsed.value;\n    var fromUnit = parsed.unit;\n\n    if ( !fromUnit || fromUnit === toUnit )\n    {\n      return value;\n    }\n\n    // First see if we have a direct conversion available...\n    if ( fromUnit in conversions && toUnit in conversions[ fromUnit ] )\n    {\n      var converter = conversions[ fromUnit ][ toUnit ];\n\n      value *= getConverterScale( e, converter, relativeTo );\n    }\n    // Otherwise convert it to px, then to the desired unit\n    else if ( fromUnit in conversions && conversions[ fromUnit ].px && toUnit in conversions.px )\n    {\n      var converter1 = conversions[ fromUnit ].px;\n      var converter2 = conversions.px[ toUnit ];\n\n      var combined = getConverterScale( e, converter1, relativeTo ) *\n                     getConverterScale( e, converter2, relativeTo );\n\n      value *= combined;\n    }\n\n    return value;\n  };\n\n})();\n\n\n/**\n * Easings equivalent to the CSS animations. These are approximations since the\n * exact functions are not performant enough.\n */\n\nEasings['cssEase']      = Easings.ease;\n\nEasings['cssEaseIn']    = Easings.quad;\n\nEasings['cssEaseOut']   = EasingTypes.out( Easings.quad );\n\nEasings['cssEaseInOut'] = EasingTypes.inout( Easings.quad );\n\nEasings['cssLinear']    = Easings.linear;\n\n\nvar Attributes = {};\n\n/**\n * The default attribute.\n */\nAttributes['default']              = {defaultValue: 0};\n\n/**\n * All animatable attributes for AnimatorDoms & HTMLElements.\n */\n\nAttributes.padding                 = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingTop              = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingRight            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingBottom           = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.paddingLeft             = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.margin                  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginTop               = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginRight             = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginBottom            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.marginLeft              = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.borderRadius            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderTopLeftRadius     = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderTopRightRadius    = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderBottomLeftRadius  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderBottomRightRadius = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.borderWidth             = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderTopWidth          = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderRightWidth        = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderBottomWidth       = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderLeftWidth         = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.outlineWidth            = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.outlineOffset           = {defaultValue: 0};\nAttributes.textIndent              = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.borderSpacing           = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.fontSize                = {defaultValue: 1, defaultUnit: 'em'};\nAttributes.lineHeight              = {defaultValue: 1, defaultUnit: 'em'};\nAttributes.letterSpacing           = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.origin                  = {defaultValue: {x:50, y:50}, defaultUnit: '%', property: 'transformOrigin', calculator: '2d'};\nAttributes.originX                 = {defaultValue: 50, defaultUnit: '%', property: 'transformOrigin'};\nAttributes.originY                 = {defaultValue: 50, defaultUnit: '%', property: 'transformOrigin'};\n\nAttributes.opacity                 = {defaultValue: 1};\nAttributes.zIndex                  = {defaultValue: 1};\n\nAttributes.width                   = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.minWidth                = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.maxWidth                = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.height                  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.minHeight               = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.maxHeight               = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.angle                   = {defaultValue: 0, property: 'orbit', defaultUnit: 'deg'};\nAttributes.distance                = {defaultValue: 0, property: 'orbit', defaultUnit: 'px'};\nAttributes.orbitOffset             = {defaultValue: {x:50, y:50}, defaultUnit: '%', property: 'orbitOffset', calculator: '2d'};\n\nAttributes.top                     = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.right                   = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.bottom                  = {defaultValue: 0, defaultUnit: 'px'};\nAttributes.left                    = {defaultValue: 0, defaultUnit: 'px'};\n\nAttributes.center                  = {defaultValue: {x:0, y:0}, defaultUnit: 'px', property: 'center', calculator: '2d'};\nAttributes.centerX                 = {defaultValue: 0, defaultUnit: 'px', property: 'center'};\nAttributes.centerY                 = {defaultValue: 0, defaultUnit: 'px', property: 'center'};\n\nAttributes.blur                    = {defaultValue: 0, property: 'filter', defaultUnit: 'px'};\nAttributes.sepia                   = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.brightness              = {defaultValue: 100, property: 'filter', defaultUnit: '%'};\nAttributes.grayscale               = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.contrast                = {defaultValue: 100, property: 'filter', defaultUnit: '%'};\nAttributes.invert                  = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.saturation              = {defaultValue: 0, property: 'filter', defaultUnit: '%'};\nAttributes.hueRotate               = {defaultValue: 0, property: 'filter', defaultUnit: 'deg'};\n\nAttributes.rotate                  = {defaultValue: 0, property: 'transform', defaultUnit: 'deg'};\nAttributes.rotate3d                = {defaultValue: {x:0, y:0, z:1, angle:0}, property: 'transform', calculator: 'quaternion', defaultUnit: 'deg'};\n\nAttributes.translate               = {defaultValue: {x:0, y:0}, property: 'transform', calculator: '2d', defaultUnit: 'px'};\nAttributes.translateX              = {defaultValue: 0, property: 'transform', defaultUnit: 'px'};\nAttributes.translateY              = {defaultValue: 0, property: 'transform', defaultUnit: 'px'};\nAttributes.translateZ              = {defaultValue: 0, property: 'transform', defaultUnit: 'px'};\nAttributes.translate3d             = {defaultValue: {x:0, y:0, z:0}, property: 'transform', calculator: '3d', defaultUnit: 'px'};\n\nAttributes.scale                   = {defaultValue: {x:1, y:1}, property: 'transform', calculator: '2d'};\nAttributes.scaleX                  = {defaultValue: 1, property: 'transform'};\nAttributes.scaleY                  = {defaultValue: 1, property: 'transform'};\nAttributes.scaleZ                  = {defaultValue: 1, property: 'transform'};\nAttributes.scale3d                 = {defaultValue: {x:1, y:1, z:1}, property: 'transform', calculator: '3d'};\n\nAttributes.skew                    = {defaultValue: {x:0, y:0}, defaultUnit: 'deg', property: 'transform', calculator: '2d'};\nAttributes.skewX                   = {defaultValue: 0, defaultUnit: 'deg', property: 'transform'};\nAttributes.skewY                   = {defaultValue: 0, defaultUnit: 'deg', property: 'transform'};\n\nAttributes.backface                = {defaultValue: 0};\nAttributes.visibility              = {defaultValue: 1};\n\nAttributes.backgroundColor         = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.color                   = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderTopColor          = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderRightColor        = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderBottomColor       = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderLeftColor         = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.borderColor             = {defaultValue: Color(), calculator: 'rgba'};\nAttributes.outlineColor            = {defaultValue: Color(), calculator: 'rgba'};\n\nAttributes.textShadowX             = {defaultValue: 0, defaultUnit: 'px', property: 'textShadow'};\nAttributes.textShadowY             = {defaultValue: 0, defaultUnit: 'px', property: 'textShadow'};\nAttributes.textShadowPosition      = {defaultValue: {x: 0, y: 0}, defaultUnit: 'px', calculator: '2d', property: 'textShadow'};\nAttributes.textShadowBlur          = {defaultValue: 0, defaultUnit: 'px', property: 'textShadow'};\nAttributes.textShadowColor         = {defaultValue: Color(), calculator: 'rgba', property: 'textShadow'};\n\nAttributes.shadowX                 = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowY                 = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowPosition          = {defaultValue: {x: 0, y: 0}, defaultUnit: 'px', calculator: '2d', property: 'shadow'};\nAttributes.shadowBlur              = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowSpread            = {defaultValue: 0, defaultUnit: 'px', property: 'shadow'};\nAttributes.shadowColor             = {defaultValue: Color(), calculator: 'rgba', property: 'shadow'};\nAttributes.shadowInset             = {defaultValue: 0, property: 'shadow'};\n\n\n/**\n * Returns an attribute based on the given input. If the input is an object it's assumed to be an attribute and it's\n * returned immediately. If the input is a string the attribute with the given name is returned. Otherwise\n * the default attribute is returned.\n *\n * @param {Object|String} attr\n */\nfunction $attribute(attr)\n{\n  if ( isObject( attr ) && isDefined( attr.defaultValue ) )\n  {\n    return attr;\n  }\n  if ( isString( attr ) && attr in Attributes )\n  {\n    return Attributes[ attr ];\n  }\n\n  return Attributes['default'];\n}\n\n\n\nfunction factory(nm, relativeTo)\n{\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating[nm] === false)\n      {\n        var style = $style( e, nm );\n        var converted = $convert( e, style, anim.units[ nm ], relativeTo );\n\n        if ( converted !== false )\n        {\n          anim.frame[ nm ] = converted;\n          anim.animating[ nm  ] = true;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ nm ] = anim.value( nm );\n    },\n    unset: function(e, anim, attr)\n    {\n      e.style[ nm ] = null;\n    }\n  };\n}\n\nfunction factoryDerivable(nm, relativeTo, deriver)\n{\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating[nm] === false)\n      {\n        var style = $style( e, nm );\n        var converted = $convert( e, style, anim.units[ nm ], relativeTo );\n\n        if ( converted !== false )\n        {\n          anim.frame[ nm ] = converted;\n          anim.animating[ nm ] = true;\n        }\n        else if ( isFunction( deriver ) )\n        {\n          converted = $convert( e, deriver( e ), anim.units[ nm ], relativeTo );\n\n          if ( converted !== false )\n          {\n            anim.frame[ nm ] = converted;\n            anim.animating[ nm ] = true;\n          }\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ nm ] = anim.value( nm );\n    },\n    unset: function(e, anim, attr)\n    {\n      e.style[ nm ] = null;\n    }\n  };\n}\n\nfunction factoryColor(nm)\n{\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating[nm] === false)\n      {\n        var style = $style( e, nm );\n        var parsed = Color.parse( style );\n\n        if (parsed !== false)\n        {\n          anim.frame[nm] = parsed;\n          anim.animating[nm] = true;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ nm ] = Color.format( anim.frame[nm] );\n    },\n    unset: function(e, anim, attr)\n    {\n      e.style[ nm ] = null;\n    }\n  };\n}\n\n\nvar Properties = {};\n\nProperties.noop =\n{\n  get: function(e, anim)\n  {\n  },\n  set: function(e, anim)\n  {\n  },\n  unset: function(e, anim)\n  {\n  }\n};\n\nProperties.padding                  = factory( 'padding', 'parentWidth' );\nProperties.paddingTop               = factory( 'paddingTop', 'parentWidth' );\nProperties.paddingRight             = factory( 'paddingRight', 'parentWidth' );\nProperties.paddingBottom            = factory( 'paddingBottom', 'parentWidth' );\nProperties.paddingLeft              = factory( 'paddingLeft', 'parentWidth' );\n\nProperties.margin                   = factory( 'margin', 'parentWidth' );\nProperties.marginTop                = factory( 'marginTop', 'parentWidth' );\nProperties.marginRight              = factory( 'marginRight', 'parentWidth' );\nProperties.marginBottom             = factory( 'marginBottom', 'parentWidth' );\nProperties.marginLeft               = factory( 'marginLeft', 'parentWidth' );\n\nProperties.borderRadius             = factory( 'borderRadius', 'width' );\nProperties.borderTopLeftRadius      = factory( 'borderTopLeftRadius', 'width' );\nProperties.borderTopRightRadius     = factory( 'borderTopRightRadius', 'width' );\nProperties.borderBottomLeftRadius   = factory( 'borderBottomLeftRadius', 'width' );\nProperties.borderBottomRightRadius  = factory( 'borderBottomRightRadius', 'width' );\n\nProperties.borderWidth              = factory( 'borderWidth' );\nProperties.borderTopWidth           = factory( 'borderTopWidth' );\nProperties.borderRightWidth         = factory( 'borderRightWidth' );\nProperties.borderBottomWidth        = factory( 'borderBottomWidth' );\nProperties.borderLeftWidth          = factory( 'borderLeftWidth' );\n\nProperties.outlineWidth             = factory( 'outlineWidth' );\nProperties.textIndent               = factory( 'textIndent', 'parentWidth' );\nProperties.borderSpacing            = factory( 'borderSpacing' );\nProperties.fontSize                 = factory( 'fontSize', 'parentFontSize' );\nProperties.lineHeight               = factory( 'lineHeight', 'fontSize' );\nProperties.letterSpacing            = factory( 'letterSpacing' );\n\nProperties.zIndex                   = factory( 'zIndex' );\n\nProperties.color                    = factoryColor( 'color' );\nProperties.backgroundColor          = factoryColor( 'backgroundColor' );\nProperties.borderTopColor           = factoryColor( 'borderTopColor' );\nProperties.borderRightColor         = factoryColor( 'borderRightColor' );\nProperties.borderBottomColor        = factoryColor( 'borderBottomColor' );\nProperties.borderLeftColor          = factoryColor( 'borderLeftColor' );\nProperties.borderColor              = factoryColor( 'borderColor' );\nProperties.outlineColor             = factoryColor( 'outlineColor' );\n\nProperties.minWidth                 = factory( 'minWidth', 'parentWidth' );\nProperties.maxWidth                 = factory( 'maxWidth', 'parentWidth' );\nProperties.minHeight                = factory( 'minHeight', 'parentHeight' );\nProperties.maxHeight                = factory( 'maxHeight', 'parentHeight' );\n\nProperties.width                    = factoryDerivable('width', 'parentWidth', function(e) { return e.offsetWidth + 'px'; });\nProperties.height                   = factoryDerivable('height', 'parentHeight', function(e) { return e.offsetHeight + 'px'; });\n\nProperties.top                      = factoryDerivable('top', 'parentHeight', function(e) { return e.offsetTop + 'px'; });\nProperties.right                    = factoryDerivable('right', 'parentWidth', function(e) { return (e.parentNode.scrollWidth - (e.offsetLeft + e.offsetWidth)) + 'px'; });\nProperties.bottom                   = factoryDerivable('bottom', 'parentHeight', function(e) { return (e.parentNode.scrollHeight - (e.offsetTop + e.offsetHeight)) + 'px'; });\nProperties.left                     = factoryDerivable('left', 'parentWidth', function(e) { return e.offsetLeft + 'px'; });\n\n\nProperties.zIndex.set = function(e, anim)\n{\n  anim.styles.zIndex = Math.floor( anim.frame.zIndex );\n};\n\nProperties.visibility =\n{\n  get: function(e, anim)\n  {\n    if (anim.animating.visibility === false)\n    {\n      var style = $style( e, 'visibility' );\n      anim.frame.visibility = style === 'hidden' ? 0.0 : 1.0;\n      anim.animating = true;\n    }\n  },\n  set: function(e, anim)\n  {\n    anim.styles.visibility = anim.frame.visibility < 0.5 ? 'hidden' : 'visible';\n  },\n  unset: function(e, anim)\n  {\n    e.style.visibility = null;\n  }\n};\n\nProperties.backface = (function()\n{\n  var css = $prefix(['WebkitBackfaceVisibility', 'MozBackfaceVisibility', 'msBackfaceVisibility', 'BackfaceVisibility']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      if ( anim.animating.backface === false )\n      {\n        var style = $style( e, css );\n\n        anim.frame.backface = (style === 'visible') ? 1.0 : 0.0;\n        anim.animating.backface = true;\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[css] = anim.frame.backface < 0.5 ? 'none' : 'visible';\n    },\n    unset: function(e, anim)\n    {\n      e.style[ css ] = null;\n    }\n\n  };\n\n})();\n\nProperties.transformOrigin = (function()\n{\n  var css = $prefix(['WebkitTransformOrigin', 'MozTransformOrigin', 'OTransformOrigin', 'msTransformOrigin', 'transformOrigin']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var keywords =\n  {\n    'left':   '0%',\n    'center': '50%',\n    'right':  '100%',\n    'top':    '0%',\n    'bottom': '100%'\n  };\n\n  var setOriginAttribute = function(e, value, anim, attr, relativeTo )\n  {\n    if (anim.animating[attr] === false)\n    {\n      if ( value in keywords )\n      {\n        value = keywords[ value ];\n      }\n\n      var converted = $convert( e, value, anim.units[ attr ], relativeTo );\n\n      if ( converted !== false )\n      {\n        anim.frame[ attr ] = converted;\n        anim.animating[ attr ] = true;\n      }\n    }\n  };\n\n  var setOrigin = function(e, split, anim)\n  {\n    if (anim.animating.origin === false)\n    {\n      if ((split.length === 1) ||\n          (split.length === 2 && split[0] === split[1]) ||\n          (split.length === 3 && split[0] === split[1] && split[1] === split[2]))\n      {\n        setOriginAttribute( e, split[0], anim, 'origin', 'width' );\n      }\n    }\n  };\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n\n      if (style)\n      {\n        var origin = style.toLowerCase();\n        var split = origin.split(' ');\n\n        switch (split.length)\n        {\n        case 3:\n          setOriginAttribute( e, split[0], anim, 'originX', 'width' );\n          setOriginAttribute( e, split[1], anim, 'originY', 'height' );\n          setOriginAttribute( e, split[2], anim, 'originZ' );\n          setOrigin( e, split, anim );\n          break;\n        case 2:\n          setOriginAttribute( e, split[0], anim, 'originX', 'width' );\n          setOriginAttribute( e, split[1], anim, 'originY', 'height' );\n          setOrigin( e, split, anim );\n          break;\n        case 1:\n          setOriginAttribute( e, split[0], anim, 'originX', 'width' );\n          setOriginAttribute( e, split[0], anim, 'originY', 'height' );\n          setOrigin( e, split, anim );\n          break;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      var style = null;\n\n      if ( isDefined( anim.frame.originZ ) )\n      {\n        style = anim.valueOr( 'originX', 'origin', 'x' ) + ' ' + anim.valueOr( 'originY', 'origin', 'y' ) + ' ' + anim.valueOr( 'originZ', 'origin', 'z' );\n      }\n      else\n      {\n        style = anim.valueOr( 'originX', 'origin', 'x' ) + ' ' + anim.valueOr( 'originY', 'origin', 'y' );\n      }\n\n      anim.styles[css] = style;\n    },\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n  };\n\n})();\n\nProperties.transform = (function()\n{\n  var css = $prefix(['WebkitTransform', 'MozTransform', 'OTransform', 'msTransform', 'transform']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var parse = function( e, value, anim, attr, relativeTo )\n  {\n    var desiredUnit = anim.units[ attr ];\n    var converted = $convert( e, value, desiredUnit, relativeTo );\n\n    if ( converted !== false )\n    {\n      return converted;\n    }\n\n    // TODO show convert this to desiredUnit, however defaultValue may be non-scalar.\n    return anim.getAttribute( attr ).defaultValue;\n  };\n\n  var getter1d = function(e, anim, parsed, attr)\n  {\n    return parse( e, parsed[1], anim, attr, 'width' );\n  };\n  var getter2d = function(e, anim, parsed, attr)\n  {\n    return {\n      x: parse( e, parsed[1], anim, attr, 'width' ),\n      y: parse( e, parsed[2], anim, attr, 'height' )\n    };\n  };\n  var getter3d = function(e, anim, parsed, attr)\n  {\n    return {\n      x: parse( e, parsed[1], anim, attr, 'width' ),\n      y: parse( e, parsed[2], anim, attr, 'height' ),\n      z: parse( e, parsed[3], anim, attr )\n    };\n  };\n  var getter4d = function(e, anim, parsed, attr)\n  {\n    return {\n      x: parse( e, parsed[1], anim, attr, 'width' ),\n      y: parse( e, parsed[2], anim, attr, 'height' ),\n      z: parse( e, parsed[3], anim, attr ),\n      angle: parse( e, parsed[4], anim, attr )\n    };\n  };\n\n  var setter1d = function(attr, value, unit)\n  {\n    return attr + '(' + value + unit + ')';\n  };\n  var setter2d = function(attr, value, unit)\n  {\n    return attr + '(' + value.x + unit + ',' + value.y + unit + ')';\n  };\n  var setter3d = function(attr, value, unit)\n  {\n    return attr + '(' + value.x + unit + ',' + value.y + unit + ',' + value.z + unit + ')';\n  };\n  var setter4d = function(attr, value, unit)\n  {\n    return attr + '(' + value.x + ',' + value.y + ',' + value.z + ',' + value.angle + unit + ')';\n  };\n  var combine = function(ax, ay, bx, by, ascl, bscl)\n  {\n    return {\n      x: (ascl * ax) + (bscl * bx),\n      y: (ascl * ay) + (bscl * by)\n    };\n  };\n  var place1d = function(anim, e, attr, value, relativeTo)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = $convert( e, value, anim.units[ attr ], relativeTo );\n      anim.animating[ attr ] = true;\n    }\n  };\n  var place2d = function(anim, e, attr, valueX, valueY, relativeToX, relativeToY)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = {\n        x: $convert( e, valueX, anim.units[ attr ], relativeToX ),\n        y: $convert( e, valueY, anim.units[ attr ], relativeToY )\n      };\n      anim.animating[ attr ] = true;\n    }\n  };\n  var place3d = function(anim, e, attr, valueX, valueY, valueZ, relativeToX, relativeToY, relativeToZ)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = {\n        x: $convert( e, valueX, anim.units[ attr ], relativeToX ),\n        y: $convert( e, valueY, anim.units[ attr ], relativeToY ),\n        z: $convert( e, valueZ, anim.units[ attr ], relativeToZ )\n      };\n      anim.animating[ attr ] = true;\n    }\n  };\n  var place4d = function(anim, e, attr, valueX, valueY, valueZ, valueRotate, relativeToX, relativeToY, relativeToZ, relativeToRotate)\n  {\n    if ( anim.animating[ attr ] === false )\n    {\n      anim.frame[ attr ] = {\n        x: $convert( e, valueX, anim.units[ attr ], relativeToX ),\n        y: $convert( e, valueY, anim.units[ attr ], relativeToY ),\n        z: $convert( e, valueZ, anim.units[ attr ], relativeToZ ),\n        angle: $convert( e, valueRotate, anim.units[ attr ], relativeToRotate )\n      };\n      anim.animating[ attr ] = true;\n    }\n  };\n\n  var regexes =\n  {\n    translate:    /translate\\(([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    translate3d:  /translate3d\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    translateX:   /translateX\\(([^\\)]+)\\)/i,\n    translateY:   /translateY\\(([^\\)]+)\\)/i,\n    translateZ:   /translateZ\\(([^\\)]+)\\)/i,\n    scale:        /scale\\(([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    scale3d:      /scale3d\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    scaleX:       /scaleX\\(([^\\)]+)\\)/i,\n    scaleY:       /scaleY\\(([^\\)]+)\\)/i,\n    scaleZ:       /scaleZ\\(([^\\)]+)\\)/i,\n    rotate:       /rotate\\(([^\\)]+)\\)/i,\n    skew:         /skew\\(([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    skewX:        /skewX\\(([^\\)]+)\\)/i,\n    skewY:        /skewY\\(([^\\)]+)\\)/i,\n    rotate3d:     /rotate3d\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^\\)]+)\\)/i,\n    rotateX:      /rotateX\\(([^\\)]+)\\)/i,\n    rotateY:      /rotateY\\(([^\\)]+)\\)/i,\n    rotateZ:      /rotateZ\\(([^\\)]+)\\)/i\n  };\n\n  var matrix = /matrix\\(([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\s*,\\s*([^,]+)\\)/i;\n\n  var getters =\n  {\n    translate:    getter2d,\n    translate3d:  getter3d,\n    translateX:   getter1d,\n    translateY:   getter1d,\n    translateZ:   getter1d,\n    scale:        getter2d,\n    scale3d:      getter3d,\n    scaleX:       getter1d,\n    scaleY:       getter1d,\n    scaleZ:       getter1d,\n    rotate:       getter1d,\n    rotate3d:     getter4d,\n    rotateX:      getter1d,\n    rotateY:      getter1d,\n    rotateZ:      getter1d,\n    skew:         getter2d,\n    skewX:        getter1d,\n    skewY:        getter1d\n  };\n\n  var setters =\n  {\n    translate:    setter2d,\n    translate3d:  setter3d,\n    translateX:   setter1d,\n    translateY:   setter1d,\n    translateZ:   setter1d,\n    scale:        setter2d,\n    scale3d:      setter3d,\n    scaleX:       setter1d,\n    scaleY:       setter1d,\n    scaleZ:       setter1d,\n    rotate:       setter1d,\n    rotate3d:     setter4d,\n    rotateX:      setter1d,\n    rotateY:      setter1d,\n    rotateZ:      setter1d,\n    skew:         setter2d,\n    skewX:        setter1d,\n    skewY:        setter1d\n  };\n\n  var props = new FastMap( regexes );\n  var regex = props.values;\n  var attrs = props.keys;\n  props.setters = [];\n  props.getters = [];\n\n  for (var prop in getters)\n  {\n    var i = props.indexOf( prop );\n\n    props.getters[ i ] = getters[ prop ];\n    props.setters[ i ] = setters[ prop ];\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n\n      var matrixParsed = matrix.exec( style );\n\n      if ( matrixParsed )\n      {\n        var a = parseFloat( matrixParsed[ 1 ] );\n        var b = parseFloat( matrixParsed[ 2 ] );\n        var c = parseFloat( matrixParsed[ 3 ] );\n        var d = parseFloat( matrixParsed[ 4 ] );\n        var tx = parseFloat( matrixParsed[ 5 ] );\n        var ty = parseFloat( matrixParsed[ 6 ] );\n\n        // Make sure the matrix is invertible\n        if ((a * d - b * c) !== 0)\n        {\n          // Take care of translation\n          var translateX = tx + 'px';\n          var translateY = ty + 'px';\n\n          // Compute X scale factor and normalize first row.\n          var scaleX = Math.sqrt( a * a + b * b );\n          if ( scaleX !== 0 )\n          {\n            a /= scaleX;\n            b /= scaleX;\n          }\n\n          // Compute shear factor and make 2nd row orthogonal to 1st.\n          var skew = a * c + b * d;\n          var combined = combine( c, d, a, b, 1.0, -skew );\n          c = combined.x;\n          d = combined.y;\n\n          // Now, compute Y scale and normalize 2nd row.\n          var scaleY = Math.sqrt( c * c + d * d );\n          if ( scaleY !== 0 )\n          {\n            c /= scaleY;\n            d /= scaleY;\n            skew /= scaleY;\n          }\n\n          // Now, get the rotation out\n          var rotate = Math.atan2( b, a ) + 'rad';\n\n          // Place values in animator.\n          place2d( anim, e, 'translate', translateX, translateY, 'width', 'height' );\n          place3d( anim, e, 'translate3d', translateX, translateY, 0, 'width', 'height' );\n          place1d( anim, e, 'translateX', translateX, 'width' );\n          place1d( anim, e, 'translateY', translateY, 'height' );\n          place2d( anim, e, 'scale', scaleX, scaleY );\n          place1d( anim, e, 'scaleX', scaleX );\n          place1d( anim, e, 'scaleY', scaleY );\n          place3d( anim, e, 'scale3d', scaleX, scaleY, 1 );\n          place1d( anim, e, 'rotate', rotate );\n          place4d( anim, e, 'rotate3d', 0, 0, 1, rotate );\n          place1d( anim, e, 'rotateZ', rotate );\n          place2d( anim, e, 'skew', skew, skew );\n          place1d( anim, e, 'skewX', skew );\n          place1d( anim, e, 'skewY', skew );\n\n          return;\n        }\n      }\n\n      for (var attr in anim.animating)\n      {\n        var i = props.indexOf( attr );\n\n        if ( i !== -1 && anim.animating[ attr ] === false )\n        {\n          var parsed = regex[ i ].exec( style );\n\n          if ( parsed )\n          {\n            anim.frame[ attr ] = props.getters[ i ]( e, anim, parsed, attr );\n            anim.animating[ attr ] = true;\n          }\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      var transforms = [];\n\n      for (var i = 0; i < attrs.length; i++)\n      {\n        var attr = attrs[ i ];\n\n        if ( attr in anim.frame )\n        {\n          transforms.push( props.setters[ i ]( attr, anim.frame[ attr ], anim.units[ attr ] ) );\n        }\n      }\n\n      if (transforms.length)\n      {\n        anim.styles[ css ] = transforms.join( ' ' );\n      }\n    },\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, '' );\n    }\n  };\n\n})();\n\nProperties.opacity = (function()\n{\n  var css = $prefix(['WebkitOpacity', 'MozOpacity', 'KhtmlOpacity', 'opacity']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      if (anim.animating.opacity === false)\n      {\n        var style = $style( e, css );\n        var opacity = parseFloat( style );\n\n        if ( !isNaN(opacity) )\n        {\n          anim.frame.opacity = opacity;\n          anim.animating.opacity = true;\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      anim.styles[ css ] = clamp( anim.frame.opacity, 0, 1 );\n    },\n    unset: function(e, anim)\n    {\n      e.style[ css ] = null;\n    }\n  };\n\n})();\n\nProperties.shadow = (function()\n{\n  var css = $prefix(['WebkitBoxShadow', 'MozBoxShadow', 'boxShadow']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var parsePart = function( e, anim, attr, value, relativeTo )\n  {\n    if ( anim.updating[ attr ] === false && value )\n    {\n      var parsed = $convert( e, value, anim.units[ attr ], relativeTo );\n\n      if ( parsed !== false )\n      {\n        anim.frame[ attr ] = parsed;\n        anim.updating[ attr ] = true;\n      }\n    }\n  };\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n      var parts = style.split( ' ' );\n\n      if ( parts.length < 3 )\n      {\n        return;\n      }\n\n      var inset = 0;\n\n      if ( parts[ 0 ] === 'inset' )\n      {\n        inset = 1;\n        parts.shift();\n      }\n\n      var x = parts[ 0 ];\n      var y = parts[ 1 ];\n      var blur = false, spread = false, color = false;\n\n      switch ( parts.length ) {\n        case 3:\n          color = parts[ 2 ];\n          break;\n        case 4:\n          blur = parts[ 2 ];\n          color = parts[ 3 ];\n          break;\n        case 5:\n          blur = parts[ 2 ];\n          spread = parts[ 3 ];\n          color = parts[ 4 ];\n          break;\n      }\n\n      parsePart( e, anim, 'shadowX', x, 'width' );\n      parsePart( e, anim, 'shadowY', y, 'height' );\n      parsePart( e, anim, 'shadowBlur', blur, 'width' );\n      parsePart( e, anim, 'shadowSpread', spread, 'width' );\n\n      if ( anim.updating.shadowPosition === false )\n      {\n        var parsedX = $convert( e, x, anim.units.shadowPosition, 'width' );\n        var parsedY = $convert( e, y, anim.units.shadowPosition, 'height' );\n\n        if ( parsedX !== false && parsedY !== false )\n        {\n          anim.frame.shadowPosition = {\n            x: parsedX,\n            y: parsedY\n          };\n          anim.updating.shadowPosition = true;\n        }\n      }\n\n      if ( anim.updating.shadowInset === false )\n      {\n        anim.frame.shadowInset = inset;\n        anim.updating.shadowInset = true;\n      }\n\n      if ( anim.updating.shadowColor === false )\n      {\n        var parsed = Color.parse( color );\n\n        if ( parsed !== false )\n        {\n          anim.frame.shadowColor = parsed;\n          anim.updating.shadowColor = true;\n        }\n      }\n\n    },\n\n    set: function(e, anim)\n    {\n      var style = '';\n\n      if ( anim.frame.inset )\n      {\n        style += 'inset '; // TODO test - fixed but not sure\n      }\n\n      style += anim.valueOr( 'shadowX', 'shadowPosition', 'x' ) + ' ';\n      style += anim.valueOr( 'shadowY', 'shadowPosition', 'y' ) + ' ';\n\n      if ( isNumber( anim.frame.shadowBlur ) )\n      {\n        style += anim.value( 'shadowBlur' ) + ' ';\n      }\n\n      if ( isNumber( anim.frame.shadowSpread ) )\n      {\n        style += anim.value( 'shadowSpread' ) + ' ';\n      }\n\n      style += Color.format( anim.frame.shadowColor );\n\n      anim.styles[ css ] = style;\n    },\n\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n\n  };\n\n})();\n\n\nProperties.textShadow = (function()\n{\n  var css = $prefix(['WebkitTextShadow', 'MozTextShadow', 'textShadow']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var parsePart = function( e, anim, attr, value, relativeTo )\n  {\n    if ( anim.updating[ attr ] === false && value )\n    {\n      var parsed = $convert( e, value, anim.units[ attr ], relativeTo );\n\n      if ( parsed !== false )\n      {\n        anim.frame[ attr ] = parsed;\n        anim.updating[ attr ] = true;\n      }\n    }\n  };\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n      var parts = style.split( ' ' );\n\n      if ( parts.length < 3 )\n      {\n        return;\n      }\n\n      var x = parts[ 0 ];\n      var y = parts[ 1 ];\n      var blur = false, color = false;\n\n      switch ( parts.length ) {\n        case 3:\n          color = parts[ 2 ];\n          break;\n        case 4:\n          blur = parts[ 2 ];\n          color = parts[ 3 ];\n          break;\n      }\n\n      parsePart( e, anim, 'textShadowX', x, 'width' );\n      parsePart( e, anim, 'textShadowY', y, 'height' );\n      parsePart( e, anim, 'textShadowBlur', blur, 'width' );\n\n      if ( anim.updating.textShadowPosition === false )\n      {\n        var parsedX = $convert( e, x, anim.units.textShadowPosition, 'width' );\n        var parsedY = $convert( e, y, anim.units.textShadowPosition, 'height' );\n\n        if ( parsedX !== false && parsedY !== false )\n        {\n          anim.frame.textShadowPosition = {\n            x: parsedX,\n            y: parsedY\n          };\n          anim.updating.textShadowPosition = true;\n        }\n      }\n\n      if ( anim.updating.textShadowColor === false )\n      {\n        var parsed = Color.parse( color );\n\n        if ( parsed !== false )\n        {\n          anim.frame.textShadowColor = parsed;\n          anim.updating.textShadowColor = true;\n        }\n      }\n    },\n\n    set: function(e, anim)\n    {\n      var style = '';\n\n      if ( anim.frame.inset )\n      {\n        style += 'inset '; // TODO test - fixed but not sure\n      }\n\n      style += anim.valueOr( 'textShadowX', 'textShadowPosition', 'x' ) + ' ';\n      style += anim.valueOr( 'textShadowY', 'textShadowPosition', 'y' ) + ' ';\n\n      if ( isNumber( anim.frame.textShadowBlur ) )\n      {\n        style += anim.value( 'textShadowBlur' ) + ' ';\n      }\n\n      if ( isNumber( anim.frame.textShadowSpread ) )\n      {\n        style += anim.value( 'textShadowSpread' ) + ' ';\n      }\n\n      style += Color.format( anim.frame.textShadowColor );\n\n      anim.styles[ css ] = style;\n    },\n\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n\n  };\n\n})();\n\nProperties.filter = (function()\n{\n  var css = $prefix(['WebkitFilter', 'MozFilter', 'OFilter', 'msFilter', 'filter']);\n\n  if ( !css )\n  {\n    return Properties.noop;\n  }\n\n  var methods =\n  {\n    grayscale:  'grayscale',\n    sepia:      'sepia',\n    saturate:   'saturate',\n    hueRotate:  'hue-rotate',\n    invert:     'invert',\n    brightness: 'brightness',\n    contrast:   'contrast',\n    blur:       'blur'\n  };\n\n  var patterns = {};\n\n  for (var attr in methods)\n  {\n    patterns[attr] = new RegExp( methods[attr] + '\\(([^\\)]+)\\)', 'i');\n  }\n\n  return {\n\n    get: function(e, anim)\n    {\n      var style = $style( e, css );\n\n      for (var attr in patterns)\n      {\n        if ( anim.animating[attr] === false )\n        {\n          var parsed = patterns[attr].exec( style );\n\n          if ( parsed )\n          {\n            var converted = $convert( e, parsed[1], anim.units[ attr ] );\n\n            if ( converted !== false )\n            {\n              anim.frame[ attr ] = converted;\n              anim.animating[ attr ] = true;\n            }\n          }\n        }\n      }\n    },\n    set: function(e, anim)\n    {\n      // we don't check anim.updated[attr] here since the current value of a transform property is important\n\n      var filters = [];\n\n      for (var attr in methods)\n      {\n        if ( attr in anim.frame )\n        {\n          filters.push( methods[attr] + '(' + anim.value( attr ) + ')' );\n        }\n      }\n\n      if (filters.length)\n      {\n        anim.styles[ css ] = filters.join(' ');\n      }\n    },\n    unset: function(e, anim, attr)\n    {\n      unset( e, anim, attr, this, css, null );\n    }\n  };\n\n})();\n\nProperties.center =\n{\n  get: function(e, anim)\n  {\n    var cx = (e.offsetLeft + e.offsetWidth * 0.5) + 'px';\n    var cy = (e.offsetTop + e.offsetHeight * 0.5) + 'px';\n\n    if ( anim.animating.center === false )\n    {\n      var desiredUnit = anim.units.center;\n      var ccx = $convert( e, cx, desiredUnit, 'parentWidth' );\n      var ccy = $convert( e, cy, desiredUnit, 'parentHeight' );\n\n      if ( ccx !== false && ccy !== false )\n      {\n        anim.frame.center = {\n          x: ccx,\n          y: ccy\n        };\n        anim.animating.center = true;\n      }\n    }\n    if ( anim.animating.centerX === false )\n    {\n      var desiredUnit = anim.units.centerX;\n      var ccx = $convert( e, cx, desiredUnit, 'parentWidth' );\n\n      if ( ccx !== false )\n      {\n        anim.frame.centerX = ccx;\n        anim.animating.centerX = true;\n      }\n    }\n    if ( anim.animating.centerY === false )\n    {\n      var desiredUnit = anim.units.centerY;\n      var ccy = $convert( e, cy, desiredUnit, 'parentHeight' );\n\n      if ( ccy !== false )\n      {\n        anim.frame.centerY = ccy;\n        anim.animating.centerY = true;\n      }\n    }\n  },\n  preset: function(e, anim)\n  {\n    anim.cached.width  = $convert( e, e.offsetWidth + 'px', anim.units.centerX || anim.units.center, 'parentWidth' );\n    anim.cached.height = $convert( e, e.offsetHeight + 'px', anim.units.centerY || anim.units.center, 'parentHeight' );\n  },\n  set: function(e, anim)\n  {\n    var rw = anim.cached.width * 0.5;\n    var rh = anim.cached.height * 0.5;\n\n    if ( anim.updated.center )\n    {\n      anim.styles.left = (anim.frame.center.x - rw) + anim.units.center;\n      anim.styles.top = (anim.frame.center.y - rh) + anim.units.center;\n    }\n    if ( anim.updated.centerX )\n    {\n      anim.styles.left = (anim.frame.centerX - rw) + anim.units.centerX;\n    }\n    if ( anim.updated.centerY )\n    {\n      anim.styles.top = (anim.frame.centerY - rh) + anim.units.centerY;\n    }\n  },\n  unset: function(e, anim, attr)\n  {\n\n  }\n};\n\nProperties.orbit =\n{\n  DEGREE_TO_RADIAN: Math.PI / 180.0,\n\n  RADIAN_TO_DEGREE: 180.0 / Math.PI,\n\n  get: function(e, anim)\n  {\n    var ox = (e.parentNode.scrollWidth * 0.5);\n    var oy = (e.parentNode.scrollHeight * 0.5);\n    var cx = (e.offsetLeft + e.offsetWidth * 0.5);\n    var cy = (e.offsetTop + e.offsetHeight * 0.5);\n    var dx = cx - ox;\n    var dy = cy - oy;\n\n    if ( anim.animating.orbitOffset === false )\n    {\n      var cunit = anim.units.orbitOffset;\n      var cox = $convert( e, ox + 'px', cunit, 'parentWidth' );\n      var coy = $convert( e, oy + 'px', cunit, 'parentHeight' );\n\n      if ( cox !== false && coy !== false )\n      {\n        anim.frame.orbitOffset = {\n          x: cox,\n          y: coy\n        };\n        anim.animating.orbitOffset = false;\n      }\n    }\n\n    if ( anim.animating.distance === false )\n    {\n      anim.frame.distance = Math.sqrt( dx * dx + dy * dy );\n      anim.animating.distance = true;\n    }\n\n    if ( anim.animating.angle === false )\n    {\n      anim.frame.angle = Math.atan2( dy, dx ) * this.RADIAN_TO_DEGREE;\n      anim.animating.angle = true;\n    }\n  },\n\n  preset: function(e, anim)\n  {\n    anim.cached.parentWidth = e.parentNode.scrollWidth;\n    anim.cached.parentHeight = e.parentNode.scrollHeight;\n    anim.cached.width = e.offsetWidth;\n    anim.cached.height = e.offsetHeight;\n  },\n\n  set: function(e, anim)\n  {\n    // TODO calculator this correctly\n    var cunit = anim.units.orbitOffset || '%';\n    var orbitX = anim.frame.orbitOffset ? anim.frame.orbitOffset.x : 50;\n    var orbitY = anim.frame.orbitOffset ? anim.frame.orbitOffset.y : 50;\n\n    var originUnit = anim.units.origin || '%';\n    var originX = anim.frame.origin ? anim.frame.origin.x : 50;\n    var originY = anim.frame.origin ? anim.frame.origin.y : 50;\n\n    var cox = $convert( e, orbitX + cunit, 'px', anim.cached.parentWidth / 100.0 );\n    var coy = $convert( e, orbitY + cunit, 'px', anim.cached.parentHeight / 100.0 );\n\n    var ox = $convert( e, originX + originUnit, 'px', anim.cached.width / 100.0 );\n    var oy = $convert( e, originY + originUnit, 'px', anim.cached.height / 100.0 );\n\n    var angle = (anim.frame.angle || 0.0) * this.DEGREE_TO_RADIAN;\n    var distance = anim.frame.distance || 0.0;\n\n    var cos = Math.cos( angle ) * distance;\n    var sin = Math.sin( angle ) * distance;\n\n    anim.styles.left = (cox + cos - ox) + 'px';\n    anim.styles.top = (coy + sin - oy) + 'px';\n  },\n\n  unset: function(e, anim, attr)\n  {\n\n  }\n};\n\n\n/**\n * Returns a property for the given name.\n *\n * @param  {String|Object}\n * @return {Object}\n */\nfunction $property(prop)\n{\n  if ( isObject( prop ) && isFunction( prop.get ) && isFunction( prop.set ) )\n  {\n    return prop;\n  }\n  if ( isString( prop ) && prop in Properties )\n  {\n    return Properties[ prop ];\n  }\n\n  throw prop + ' is not a valid property';\n}\n\nfunction unset( e, anim, attr, property, css, clearedValue )\n{\n  if ( attr === true )\n  {\n    e.style[ css ] = clearedValue;\n  }\n  else\n  {\n    delete anim.frame[ attr ];\n\n    property.set( e, anim );\n\n    e.style[ css ] = anim.styles[ css ];\n  }\n}\n\n\n/**\n * Instantiates a new AnimatorDom given a subject.\n *\n * @param {HTMLElement} e\n * @class AnimatorDom\n * @constructor\n * @extends Animator\n */\nfunction AnimatorDom(subject)\n{\n  this.reset( subject );\n  this.properties = new FastMap();\n  this.propertiesPreset = new FastMap();\n  this.attributeToProperty = {};\n  this.animating = {};\n  this.cached = {};\n  this.units = {};\n  this.styles = {};\n  this.styled = false;\n  this.stylesUpdated = false;\n}\n\n/**\n * Extends anim8.Animator\n */\nClass.extend( AnimatorDom, Animator,\n{\n  preupdate: function(now)\n  {\n    // If there are events with paths that contain computed values we should\n    // populate the frame directly from the HTML element.\n    var aa = this.attrimatorsAdded;\n\n    if ( aa.length )\n    {\n      var properties = {};\n\n      for (var i = aa.length - 1; i >= 0; i--)\n      {\n        var attrimator = aa[ i ];\n        var attr = attrimator.attribute;\n\n        if ( !(attr in this.frame) && attrimator.hasComputed() )\n        {\n          properties[ this.attributeToProperty[ attr ] ] = true;\n\n          this.animating[ attr ] = false;\n        }\n      }\n\n      for (var prop in properties)\n      {\n        this.properties.get( prop ).get( this.subject, this );\n      }\n\n      for (var i = aa.length - 1; i >= 0; i--)\n      {\n        var attrimator = aa[ i ];\n        var attr = attrimator.attribute;\n\n        this.setDefault( attr );\n\n        attrimator.start( now, this );\n      }\n\n      aa.length = 0;\n    }\n\n    // If a property currently being animated requires some heads up before it\n    // gets or sets a value, notify it. TODO removed dead properties.\n    var presets = this.propertiesPreset.values;\n    for (var i = presets.length - 1; i >= 0; i--)\n    {\n      presets[ i ].preset( this.subject, this );\n    }\n\n    this.trigger('preupdate');\n\n    return this;\n  },\n\n  update: function(now)\n  {\n    this._update( now );\n\n    this.getStyles();\n    this.stylesUpdated = true;\n\n    return this;\n  },\n\n  apply: function()\n  {\n    if ( !this.styled && !this.stylesUpdated )\n    {\n      this.getStyles();\n    }\n\n    if ( this.styled )\n    {\n      for (var prop in this.styles)\n      {\n         this.subject.style[ prop ] = this.styles[ prop ];\n      }\n\n      for (var attr in this.frame)\n      {\n        this.updated[ attr ] = false;\n      }\n\n      this.styled = false;\n    }\n\n    this.stylesUpdated = false;\n\n    this.trigger('apply');\n\n    this.trimAttrimators();\n\n    return this;\n  },\n\n  placeAttrimator: function( attrimator )\n  {\n    this._placeAttrimator( attrimator );\n\n    var attr = attrimator.attribute;\n    var attribute = this.getAttribute( attr );\n    var propertyName = attribute.propertyName;\n    var property = attribute.property;\n\n    this.properties.put( propertyName, property );\n\n    this.attributeToProperty[ attr ] = propertyName;\n    this.units[ attr ] = attribute.defaultUnit;\n\n    if ( attrimator.input && attrimator.input.units && attr in attrimator.input.units )\n    {\n      this.units[ attr ] = attrimator.input.units[ attr ];\n    }\n\n    if ( isFunction( property.preset ) )\n    {\n      this.propertiesPreset.put( propertyName, property );\n    }\n\n    return this;\n  },\n  restore: function()\n  {\n    var props = this.properties.values;\n\n    for (var i = props.length - 1; i >= 0; i--)\n    {\n      props[ i ].unset( this.subject, this, true );\n    }\n\n    this.frame = {};\n\n    return this;\n  },\n  unset: function( attributes )\n  {\n    var attributes = toArray( coalesce( attributes, this.frame ) );\n\n    for (var i = attributes.length - 1; i >= 0; i--)\n    {\n      var attr = attributes[ i ];\n      var prop = this.attributeToProperty[ attr ];\n      var property = this.properties.get( prop );\n\n      if ( property )\n      {\n        property.unset( this.subject, this, attr );\n      }\n\n      this.attrimators.remove( attr );\n\n      delete this.frame[ attr ];\n    }\n\n    return this;\n  },\n  set: function( attributes )\n  {\n    var props = {};\n    var updated = {};\n    var units = {};\n    var styles = {};\n\n    for (var attr in attributes)\n    {\n      var attribute = this.getAttribute( attr );\n      var value     = attributes[ attr ];\n\n      units[ attr ] = attribute.defaultUnit;\n\n      if ( isString( value ) )\n      {\n        var parsed = $parseValue( value, attribute.defaultUnit );\n\n        if ( parsed !== false )\n        {\n          units[ attr ] = parsed.unit || attribute.defaultUnit;\n          value = parsed.value;\n        }\n      }\n\n      var parsed = attribute.parse( value );\n\n      if ( parsed !== false )\n      {\n        props[ attribute.propertyName ] = attribute.property;\n        attributes[ attr ] = parsed;\n        updated[ attr ] = true;\n      }\n    }\n\n    var flash =\n    {\n      source: this,\n\n      units: units,\n\n      frame: attributes,\n\n      updated: updated,\n\n      styles: styles,\n\n      cached: {},\n\n      get: function(attributes)\n      {\n        return this.source.get( attributes );\n      },\n\n      value: function(attr)\n      {\n        return attributes[ attr ] + units[ attr ];\n      },\n\n      valueOr: function(attr, other, subproperty)\n      {\n        var value = attributes[ attr ];\n\n        if ( !isDefined( value ) )\n        {\n          value = attributes[ attr = other ];\n\n          if ( isDefined( subproperty ) )\n          {\n            value = value[ subproperty ];\n          }\n        }\n\n        return value + units[ attr ];\n      }\n    };\n\n    for (var prop in props)\n    {\n      var property = props[ prop ];\n\n      if ( isFunction( property.preset ) )\n      {\n        props[ prop ].preset( this.subject, flash );\n      }\n    }\n\n    for (var prop in props)\n    {\n      props[ prop ].set( this.subject, flash );\n    }\n\n    for (var prop in styles)\n    {\n      this.subject.style[ prop ] = styles[ prop ];\n    }\n\n    return this;\n  },\n\n  /**\n   * Builds the styles map in preparation to be applied.\n   *\n   * @method getStyles\n   */\n  getStyles: function()\n  {\n    this.styles = {};\n\n    var applyProperties = {};\n\n    for (var attr in this.frame)\n    {\n      if ( this.updated[ attr ] )\n      {\n        var prop = this.attributeToProperty[ attr ];\n\n        if ( this.properties.has( prop ) )\n        {\n          applyProperties[ prop ] = true;\n        }\n      }\n    }\n\n    for (var prop in applyProperties)\n    {\n      this.properties.get( prop ).set( this.subject, this );\n\n      this.styled = true;\n    }\n  },\n\n  /**\n   * Gets the current attribute values for all attributes specified. The argument must be an object\n   * where the key is the name of an attribute and the value is the desired unit.\n   *\n   * @method get\n   * @param {Object} attributes\n   * @return {Object}\n   */\n  get: function(attributes)\n  {\n    var props = {};\n    var animating = {};\n    var units = {};\n    var out = {};\n\n    for (var attr in attributes)\n    {\n      var attribute = this.getAttribute( attr );\n\n      animating[ attr ] = false;\n      units[ attr ] = attributes[ attr ] || attribute.defaultUnit;\n      props[ attribute.propertyName ] = attribute.property;\n      out[ attr ] = attribute.cloneDefault();\n    }\n\n    var flash =\n    {\n      source: this,\n\n      units: units,\n\n      frame: out,\n\n      animating: animating,\n\n      unit: function(attr)\n      {\n        return units[ attr ];\n      }\n    };\n\n    for (var prop in props)\n    {\n      props[ prop ].get( this.subject, flash );\n    }\n\n    return out;\n  },\n\n  /**\n   * Returns a function that returns the current value for the given attribute when invoked.\n   *\n   * @param {String} attribute\n   * @param {String} desiredUnit\n   * @param {String} relativeTo\n   * @return {Function}\n   */\n  ref: function(attribute, desiredUnit, relativeTo)\n  {\n    var animator = this;\n    var request = {};\n\n    return function()\n    {\n      if ( attribute in animator.frame && isNumber( animator.frame[ attribute ] ) )\n      {\n        return $convert( animator.e, animator.value( attribute ), desiredUnit, relativeTo );\n      }\n\n      request[ attribute ] = desiredUnit;\n\n      var current = animator.get( request );\n\n      if ( isDefined( current[ attribute ] ) )\n      {\n        return current[ attribute ];\n      }\n\n      return animator.getAttribute( attribute ).defaultValue;\n    };\n  },\n\n  /**\n   * Returns the value for the given attribute as a string with the current units.\n   *\n   * @method value\n   * @param {String} attr\n   * @return {String}\n   */\n  value: function(attr)\n  {\n    return this.frame[ attr ] + this.units[ attr ];\n  },\n\n  /**\n   * Returns the value for the given attribute as a string with the current units.\n   * if the attribute doesn't exist a secondary one is looked up. If that value\n   * is an object and contains the given subproperty the value is resolved once again.\n   *\n   * @method valueOr\n   * @param {String} attr\n   * @param {String} other\n   * @param [String] subproperty\n   * @return {String}\n   */\n  valueOr: function(attr, other, subproperty)\n  {\n    var value = this.frame[ attr ];\n\n    if ( !isDefined( value ) )\n    {\n      value = this.frame[ attr = other ];\n\n      if ( isDefined( subproperty ) )\n      {\n        value = value[ subproperty ];\n      }\n    }\n\n    return value + this.units[ attr ];\n  },\n\n  /**\n   * Tweens a single attribute to a target value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenTo\n   * @param {String} attr\n   * @param {T} target\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  tweenTo: function(attr, target, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._tweenTo( attr, target, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Tweens multiple attributes to target values.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenManyTo\n   * @param {Object} targets\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  tweenManyTo: function(targets, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._tweenManyTo( targets, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Tweens a single attribute from a starting value to the current value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenFrom\n   * @param {String} attr\n   * @param {T} starting\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  tweenFrom: function(attr, starting, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._tweenFrom( attr, starting, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Tweens multiple attributes from starting values to the current values.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenManyFrom\n   * @param {Object} startings\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  tweenManyFrom: function(startings, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._tweenManyFrom( startings, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Tweens an attribute from a starting value to an ending value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tween\n   * @param {String} attr\n   * @param {T} starts\n   * @param {T} ends\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  tween: function(attr, starts, ends, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._tween( attr, starts, ends, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Tweens multiple attributes from starting values to ending values.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method tweenMany\n   * @param {Object} starts\n   * @param {Object} ends\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  tweenMany: function(starts, ends, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._tweenMany( starts, ends, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Moves an attribute relative to its current value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method move\n   * @param {String} attr\n   * @param {T} amount\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  move: function(attr, amount, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._move( attr, amount, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Moves multiple attribute relative to their current value.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method moveMany\n   * @param {Object} amounts\n   * @param {String|Array|Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {Object} [units]\n   * @chainable\n   */\n  moveMany: function(amounts, options, cache, units)\n  {\n    this.convertExistingMany( units );\n    this._moveMany( amounts, options, cache );\n    override( this.units, units );\n    return this;\n  },\n\n  /**\n   * Follows the attribute along the given path definition.\n   *\n   * **See:** {{#crossLink \"Core/anim8.options:method\"}}{{/crossLink}}\n   *\n   * @method follow\n   * @param {String} attr\n   * @param {Path|Object|String} path\n   * @param {Object} [options]\n   * @param {Boolean} [cache=false]\n   * @param {String} [unit]\n   * @chainable\n   */\n  follow: function(attr, path, options, cache, unit)\n  {\n    this.convertExisting( attr, unit );\n    this._follow( attr, path, options, cache );\n    this.units[ attr ] = unit || this.units[ attr ];\n    return this;\n  },\n\n  /**\n   * Converts any existing attributes to the desired units.\n   *\n   * @method convertExistingMany\n   * @param  {Object} units\n   */\n  convertExistingMany: function(units)\n  {\n    if ( units && isObject( units ) )\n    {\n      var current = this.get( units );\n\n      for (var attr in current)\n      {\n        this.frame[ attr ] = current[ attr ];\n      }\n    }\n  },\n\n  /**\n   * Converts any existing attribute to the desired unit.\n   *\n   * @method convertExisting\n   * @param  {String} attr\n   * @param  {String} toUnit\n   */\n  convertExisting: function(attr, toUnit)\n  {\n    if ( toUnit && attr in this.frame && attr in this.units && this.units[ attr ] !== toUnit )\n    {\n      var request = {};\n      request[ attr ] = toUnit;\n\n      this.convertExistingMany( request );\n    }\n  }\n\n});\n\n\n/**\n * A factory for HTML Elements\n */\nfunction FactoryDom()\n{\n  this.cached = {};\n  this.ids = 0;\n  this.elementAttribute = 'anim8';\n  this.priority = 5;\n  this.attributes = {};\n}\n\nClass.extend( FactoryDom, Factory,\n{\n\n  /**\n   * Determines whether the given subject is valid for this factory to create Animators for.\n   *\n   * @param  {any} subject\n   * @return {Boolean}\n   */\n  is: function(subject)\n  {\n    return isElement( subject );\n  },\n\n  /**\n   * Returns an animator given a subject.\n   *\n   * @param  {HTMLElement} subject\n   * @return {anim8.Animator}\n   */\n  animatorFor: function(subject)\n  {\n    var animatorId = subject.getAttribute( this.elementAttribute );\n\n    if (!(animatorId in this.cached))\n    {\n      var animator = new AnimatorDom( subject );\n\n      subject.setAttribute( this.elementAttribute, animatorId = animator.id = ++this.ids );\n\n      animator.factory = this;\n\n      this.cached[animatorId] = animator;\n    }\n\n    return this.cached[ animatorId ];\n  },\n\n  /**\n   * Destroys the animator by unlinking the animator from the subject.\n   *\n   * @param  {anim8.Animator} animator\n   */\n  destroy: function(animator)\n  {\n    delete this.cached[ animator.id ];\n  },\n\n  /**\n   * Returns the attribute descriptor for the given attribute.\n   *\n   * @param  {String} attr\n   * @return {Object}\n   */\n  attribute: function(attr)\n  {\n    var attribute = this.attributes[ attr ];\n\n    if ( !attribute )\n    {\n      attribute = this.attributes[ attr ] = $attribute( attr );\n\n      var calculatorName = attribute.calculator;\n      var calculator = $calculator( calculatorName );\n      var defaultValue = calculator.parse( attribute.defaultValue, calculator.ZERO );\n      var propertyName = coalesce( attribute.property, attr );\n      var property = $property( propertyName );\n      var defaultUnit = attribute.defaultUnit || '';\n\n      attribute.calculatorName = calculatorName;\n      attribute.calculator = calculator;\n      attribute.defaultValue = defaultValue;\n      attribute.name = attr;\n      attribute.propertyName = propertyName;\n      attribute.property = property;\n      attribute.defaultUnit = defaultUnit;\n      attribute.parse = function(value) {\n        return this.calculator.parse( value, this.defaultValue );\n      };\n      attribute.cloneDefault = function() {\n        return this.calculator.clone( this.defaultValue );\n      };\n    }\n\n    return attribute;\n  }\n\n});\n\nvar browser =\n{\n  IE: (function() {\n    if (!(window.ActiveXObject) && \"ActiveXObject\" in window) { return 11; }\n    if (!document.all) { return false; }\n    if (!document.compatMode) { return 5; }\n    if (!window.XMLHttpRequest) { return 6; }\n    if (!document.querySelector) { return 7; }\n    if (!document.addEventListener) { return 8; }\n    if (!window.atob) { return 9; }\n    return 10;\n  })()\n};\n\nvar Matrix = {\n\n  identity: function() {\n    return {\n      m11: 1.0, m12: 0.0, m21: 0.0, m22: 1.0\n    };\n  },\n\n  multiply: function(a, b) {\n    return {\n      m11: (a.m11 * b.m11) + (a.m12 * b.m21),\n      m22: (a.m21 * b.m12) + (a.m22 * b.m22),\n      m21: (a.m21 * b.m11) + (a.m22 * b.m21),\n      m12: (a.m11 * b.m12) + (a.m12 * b.m22)\n    };\n  },\n\n  rotate: function(radians) {\n    var cos = Math.cos( radians );\n    var sin = Math.sin( radians );\n    return {\n      m11: cos,\n      m12: -sin,\n      m21: sin,\n      m22: cos\n    };\n  },\n\n  scale: function(scaleX, scaleY) {\n    return {\n      m11: scaleX,\n      m12: 0.0,\n      m21: 0.0,\n      m22: scaleY\n    };\n  },\n\n  skew: function(skewX, skewY) {\n    return {\n      m11: 1.0,\n      m12: Math.tan( skewX ),\n      m21: Math.tan( skewY ),\n      m22: 1.0\n    };\n  },\n\n  transform: function(matrix, x, y) {\n    return {\n      x: matrix.m11 * x + matrix.m12 * y,\n      y: matrix.m21 * x + matrix.m22 * y\n    };\n  },\n\n  adjustment: function(matrix, w, h) {\n    var x0 = w * matrix.m11;\n    var x1 = h * matrix.m12;\n    var x2 = w * matrix.m11 + h * matrix.m12;\n    var xmin = Math.min( x0, Math.min( x1, Math.min( x2, 0 ) ) );\n    var xmax = Math.max( x0, Math.max( x1, Math.max( x2, 0 ) ) );\n\n    var y0 = w * matrix.m21;\n    var y1 = h * matrix.m22;\n    var y2 = w * matrix.m21 + h * matrix.m22;\n    var ymin = Math.min( y0, Math.min( y1, Math.min( y2, 0 ) ) );\n    var ymax = Math.max( y0, Math.max( y1, Math.max( y2, 0 ) ) );\n\n    return {\n      x: xmax - xmin,\n      y: ymax - ymin\n    };\n  }\n\n};\n\nfunction concatenateStyle(anim, style, value)\n{\n  if ( isDefined( anim.styles[ style ] ) )\n  {\n    anim.styles[ style ] += ' ' + value;\n  }\n  else\n  {\n    anim.styles[ style ] = value;\n  }\n}\n\nfunction setProperty(attr, property)\n{\n  var attribute = Attributes[ attr ];\n\n  if ( isString( attribute.property ) || !isDefined( attribute.property ) )\n  {\n    attribute.property = property;\n  }\n  else\n  {\n    attribute.propertyName = property;\n    attribute.property = $property( property );\n  }\n}\n\n/* transform, blur, opacity, margin top & left IE <= 8 */\nif ( browser.IE && browser.IE <= 8 )\n{\n  Properties.ieTransform =\n  {\n    presettings:\n    {\n      width: {\n        savedAs: 'width',\n        property: 'width',\n        relativeTo: 'parentWidth',\n        defaultProperty: 'offsetWidth',\n        toUnit: 'px'\n      },\n      height: {\n        savedAs: 'height',\n        property: 'height',\n        relativeTo: 'parentHeight',\n        defaultProperty: 'offsetHeight',\n        toUnit: 'px'\n      },\n      rotate: {\n        savedAs: 'rotate',\n        property: 'rotate',\n        toUnit: 'rad'\n      },\n      rotate3d: {\n        savedAs: 'rotate',\n        property: 'rotate3d',\n        subproperty: 'angle',\n        toUnit: 'rad'\n      },\n      skewX: {\n        savedAs: 'skewX',\n        property: 'skewX',\n        toUnit: 'rad'\n      },\n      skew2dX: {\n        savedAs: 'skewX',\n        property: 'skew',\n        subproperty: 'x',\n        toUnit: 'rad'/*,\n        remove: true*/\n      },\n      skewY: {\n        savedAs: 'skewY',\n        property: 'skewY',\n        toUnit: 'rad'\n      },\n      skew2dY: {\n        savedAs: 'skewY',\n        property: 'skew',\n        subproperty: 'y',\n        toUnit: 'rad'/*,\n        remove: true*/\n      },\n      translateX: {\n        savedAs: 'translateX',\n        property: 'translateX',\n        relativeTo: 'width',\n        toUnit: 'px'\n      },\n      translate2dX: {\n        savedAs: 'translateX',\n        property: 'translate',\n        subproperty: 'x',\n        toUnit: 'px',\n        relativeTo: 'width'\n      },\n      translate3dX: {\n        savedAs: 'translateX',\n        property: 'translate3d',\n        subproperty: 'x',\n        toUnit: 'px',\n        relativeTo: 'width'/*,\n        remove: true*/\n      },\n      translateY: {\n        savedAs: 'translateY',\n        property: 'translateY',\n        relativeTo: 'height',\n        toUnit: 'px'\n      },\n      translate2dY: {\n        savedAs: 'translateY',\n        property: 'translate',\n        subproperty: 'y',\n        toUnit: 'px',\n        relativeTo: 'height'\n      },\n      translate3dY: {\n        savedAs: 'translateY',\n        property: 'translate3d',\n        subproperty: 'y',\n        toUnit: 'px',\n        relativeTo: 'height'/*,\n        remove: true*/\n      },\n      scaleX: {\n        savedAs: 'scaleX',\n        property: 'scaleX'\n      },\n      scale2dX: {\n        savedAs: 'scaleX',\n        property: 'scale',\n        subproperty: 'x'\n      },\n      scale3dX: {\n        savedAs: 'scaleX',\n        property: 'scale3d',\n        subproperty: 'x'/*,\n        remove: true*/\n      },\n      scaleY: {\n        savedAs: 'scaleY',\n        property: 'scaleY'\n      },\n      scale2dY: {\n        savedAs: 'scaleY',\n        property: 'scale',\n        subproperty: 'y'\n      },\n      scale3dY: {\n        savedAs: 'scaleY',\n        property: 'scale3d',\n        subproperty: 'y'/*,\n        remove: true*/\n      },\n      originX: {\n        savedAs: 'originX',\n        property: 'originX',\n        toUnit: '%',\n        relativeTo: 'width'\n      },\n      origin2dX: {\n        savedAs: 'originX',\n        property: 'origin',\n        subproperty: 'x',\n        toUnit: '%',\n        relativeTo: 'width'/*,\n        remove: true*/\n      },\n      originY: {\n        savedAs: 'originY',\n        property: 'originY',\n        toUnit: '%',\n        relativeTo: 'height'\n      },\n      origin2dY: {\n        savedAs: 'originY',\n        property: 'origin',\n        subproperty: 'y',\n        toUnit: '%',\n        relativeTo: 'height'/*,\n        remove: true*/\n      },\n      marginLeft: {\n        savedAs: 'marginLeft',\n        property: 'marginLeft',\n        toUnit: 'px',\n        relativeTo: 'parentWidth'\n      },\n      marginTop: {\n        savedAs: 'marginTop',\n        property: 'marginTop',\n        toUnit: 'px',\n        relativeTo: 'parentWidth'\n      },\n      blur: {\n        savedAs: 'blur',\n        property: 'blur',\n        toUnit: 'px',\n        relativeTo: 'parentWidth',\n        remove: true\n      },\n      opacity: {\n        savedAs: 'opacity',\n        property: 'opacity',\n        remove: true\n      }\n    },\n    get: function(e, anim)\n    {\n      var settings = this.presettings;\n\n      Properties.marginLeft.get( e, anim );\n      Properties.marginTop.get( e, anim );\n\n      this.getFramed( e, anim, settings.rotate );\n      this.getFramed( e, anim, settings.rotate3d );\n      this.getFramed( e, anim, settings.skewX );\n      this.getFramed( e, anim, settings.skewY );\n      this.getFramed( e, anim, settings.skew2dX );\n      this.getFramed( e, anim, settings.skew2dY );\n      this.getFramed( e, anim, settings.translateX );\n      this.getFramed( e, anim, settings.translate2dX );\n      this.getFramed( e, anim, settings.translate3dX );\n      this.getFramed( e, anim, settings.translateY );\n      this.getFramed( e, anim, settings.translate2dY );\n      this.getFramed( e, anim, settings.translate3dY );\n      this.getFramed( e, anim, settings.scaleX );\n      this.getFramed( e, anim, settings.scale2dX );\n      this.getFramed( e, anim, settings.scale3dX );\n      this.getFramed( e, anim, settings.scaleY );\n      this.getFramed( e, anim, settings.scale2dY );\n      this.getFramed( e, anim, settings.scale3dY );\n      this.getFramed( e, anim, settings.originX );\n      this.getFramed( e, anim, settings.originY );\n      this.getFramed( e, anim, settings.origin2dX );\n      this.getFramed( e, anim, settings.origin2dY );\n\n      this.getFramed( e, anim, settings.blur );\n      this.getFramed( e, anim, settings.opacity );\n    },\n    getFramed: function(e, flash, def)\n    {\n      var anim = coalesce( flash.source, flash );\n      var attr = def.property;\n      var value = anim.frame[ attr ];\n\n      if ( isBoolean( flash.animating[ attr ] ) && isDefined( value ) )\n      {\n        var fromUnit = def.toUnit;\n        var toUnit = flash.units[ attr ];\n\n        if ( def.subproperty )\n        {\n          var attribute = anim.getAttribute( attr );\n\n          if ( !flash.frame[ attr ] )\n          {\n            flash.frame[ attr ] = attribute.cloneDefault();\n          }\n\n          var converted = value[ def.subproperty ];\n\n          if ( fromUnit !== toUnit )\n          {\n            converted = $convert( e, converted + fromUnit, toUnit, def.relativeTo );\n          }\n\n          if ( converted !== false )\n          {\n            flash.frame[ attr ][ def.subproperty ] = converted;\n            flash.animating[ attr ] = true;\n          }\n        }\n        else\n        {\n          var converted = value;\n\n          if ( fromUnit !== toUnit )\n          {\n            converted = $convert( e, converted + fromUnit, toUnit, def.relativeTo );\n          }\n\n          if ( converted !== false )\n          {\n            flash.frame[ attr ] = converted;\n            flash.animating[ attr ] = true;\n          }\n        }\n      }\n\n      return ( flash.animating[ attr ] === true );\n    },\n    resolveRelativeTo: function(anim, relativeTo)\n    {\n      var cached = anim.cached[ relativeTo ];\n\n      if ( isNumber( cached ) )\n      {\n        return cached * 0.01;\n      }\n\n      return relativeTo;\n    },\n    cacheConverted: function(e, anim, def)\n    {\n      var value = anim.frame[ def.property ];\n      var canConvert = isDefined( value );\n\n      if ( canConvert )\n      {\n        var valueUnit = anim.units[ def.property ];\n        var actualValue = ( def.subproperty ? value[ def.subproperty ] : value );\n\n        if ( valueUnit !== def.toUnit )\n        {\n          var united = actualValue + valueUnit;\n          var relativeTo = this.resolveRelativeTo( anim, def.relativeTo );\n\n          actualValue = $convert( e, united, def.toUnit, relativeTo );\n        }\n\n        if ( actualValue !== false )\n        {\n          anim.cached[ def.savedAs ] = actualValue;\n        }\n        else\n        {\n          canConvert = false;\n        }\n      }\n      else if ( def.remove )\n      {\n        delete anim.cached[ def.savedAs ];\n      }\n\n      return canConvert;\n    },\n    cacheValue: function(e, anim, def)\n    {\n      var value = anim.frame[ def.property ];\n      var hasValue = isDefined( value );\n\n      if ( hasValue )\n      {\n        anim.cached[ def.savedAs ] = ( def.subproperty ? value[ def.subproperty ] : value );\n      }\n      else if ( def.remove )\n      {\n        delete anim.cached[ def.savedAs ];\n      }\n\n      return hasValue;\n    },\n    cacheDimension: function(e, anim, def)\n    {\n      if ( !this.cacheConverted( e, anim, def ) )\n      {\n        var computedValue = $style( e, def.property );\n\n        anim.cached[ def.savedAs ] = $convert( e, computedValue, 'px', def.relativeTo ) || e[ def.defaultProperty ];\n      }\n    },\n    cachedOrDefault: function(e, anim, value, attribute, toUnit, relativeTo)\n    {\n      if ( isDefined( value ) )\n      {\n        return value;\n      }\n      if ( attribute.defaultUnit === toUnit )\n      {\n        return attribute.defaultValue;\n      }\n\n      relativeTo = this.resolveRelativeTo( anim, relativeTo );\n\n      return $convert( e, attribute.defaultValue + attribute.defaultUnit, toUnit, relativeTo );\n    },\n    preset: function(e, anim)\n    {\n      var cached = anim.cached;\n      var settings = this.presettings;\n      var attrs = Attributes;\n\n      this.cacheDimension( e, anim, settings.width );\n\n      this.cacheDimension( e, anim, settings.height );\n\n      if ( !this.cacheConverted( e, anim, settings.rotate ) )\n      {\n        this.cacheConverted( e, anim, settings.rotate3d );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.skewX ) )\n      {\n        this.cacheConverted( e, anim, settings.skew2dX );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.skewY ) )\n      {\n        this.cacheConverted( e, anim, settings.skew2dY );\n      }\n\n      if ( isDefined( cached.skewX ) || isDefined( cached.skewY ) )\n      {\n        cached.skewX = this.cachedOrDefault( e, anim, cached.skewX, attrs.skewX, 'rad' );\n        cached.skewY = this.cachedOrDefault( e, anim, cached.skewY, attrs.skewY, 'rad' );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.translateX ) )\n      {\n        if ( !this.cacheConverted( e, anim, settings.translate2dX ) )\n        {\n          this.cacheConverted( e, anim, settings.translate3dX );\n        }\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.translateY ) )\n      {\n        if ( !this.cacheConverted( e, anim, settings.translate2dY ) )\n        {\n          this.cacheConverted( e, anim, settings.translate3dY );\n        }\n      }\n\n      if ( isDefined( cached.translateX ) || isDefined( cached.translateY ) )\n      {\n        cached.translateX = this.cachedOrDefault( e, anim, cached.translateX, attrs.translateX, 'px', 'width' );\n        cached.translateY = this.cachedOrDefault( e, anim, cached.translateY, attrs.translateY, 'px', 'height' );\n      }\n\n      if ( !this.cacheValue( e, anim, settings.scaleX ) )\n      {\n        if ( !this.cacheValue( e, anim, settings.scale2dX ) )\n        {\n          this.cacheValue( e, anim, settings.scale3dX );\n        }\n      }\n\n      if ( !this.cacheValue( e, anim, settings.scaleY ) )\n      {\n        if ( !this.cacheValue( e, anim, settings.scale2dY ) )\n        {\n          this.cacheValue( e, anim, settings.scale3dY );\n        }\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.originX ) )\n      {\n        this.cacheConverted( e, anim, settings.origin2dX );\n      }\n\n      if ( !this.cacheConverted( e, anim, settings.originY ) )\n      {\n        this.cacheConverted( e, anim, settings.origin2dY );\n      }\n\n      cached.originX = this.cachedOrDefault( e, anim, cached.originX, attrs.originX, '%', 'width' );\n      cached.originY = this.cachedOrDefault( e, anim, cached.originY, attrs.originY, '%', 'height' );\n\n      if ( !isDefined( cached.baseMarginLeft ) )\n      {\n        var margins = anim.get({\n          marginLeft: 'px',\n          marginTop: 'px'\n        });\n\n        cached.baseMarginLeft = margins.marginLeft || 0;\n        cached.baseMarginTop = margins.marginTop || 0;\n      }\n\n      if ( this.cacheConverted( e, anim, settings.marginLeft ) )\n      {\n        cached.marginLeft -= cached.baseMarginLeft;\n      }\n      else\n      {\n        cached.marginLeft = 0;\n      }\n\n      if ( this.cacheConverted( e, anim, settings.marginTop ) )\n      {\n        cached.marginTop -= cached.baseMarginTop;\n      }\n      else\n      {\n        cached.marginTop = 0;\n      }\n\n      this.cacheValue( e, anim, settings.opacity );\n\n      this.cacheConverted( e, anim, settings.blur );\n    },\n    unset: function(e, anim, attr)\n    {\n      if ( attr === true )\n      {\n        e.style.filter = '';\n        e.style.marginLeft = (anim.cached.baseMarginLeft || 0) + 'px';\n        e.style.marginTop = (anim.cached.baseMarginTop || 0) + 'px';\n\n        anim.cached = {};\n      }\n    },\n    set: function(e, anim)\n    {\n      var cached = anim.cached;\n      var attrs = Attributes;\n      var w = cached.width;\n      var h = cached.height;\n      var anchorX = cached.originX * 0.01;\n      var anchorY = cached.originY * 0.01;\n      var dx = 0;\n      var dy = 0;\n      var matrix = Matrix.identity();\n\n      if ( isDefined( cached.scaleX ) || isDefined( cached.scaleY ) )\n      {\n        matrix = Matrix.multiply( matrix, Matrix.scale(\n          coalesce( cached.scaleX, attrs.scaleX.defaultValue ),\n          coalesce( cached.scaleY, attrs.scaleY.defaultValue )\n        ));\n      }\n\n      if ( isDefined( cached.skewX ) )\n      {\n        matrix = Matrix.multiply( matrix, Matrix.skew( cached.skewX, cached.skewY ) );\n      }\n\n      if ( isDefined( cached.rotate ) )\n      {\n        matrix = Matrix.multiply( matrix, Matrix.rotate( cached.rotate ) );\n      }\n\n      if ( isDefined( cached.translateX ) )\n      {\n        dx += cached.translateX;\n        dy += cached.translateY;\n      }\n\n      // Calculate the new size of the element based on the matrix. We need to\n      // adjust by the difference because IE is special.\n      var newSize = Matrix.adjustment( matrix, w, h );\n      dx += (w - newSize.x) * 0.5;\n      dy += (h - newSize.y) * 0.5;\n\n      // Adjust for a non-centered transformation\n      var hw = w * 0.5;\n      var hh = h * 0.5;\n      var origin = Matrix.transform( matrix, hw, hh );\n      dx += (hw - origin.x) * (anchorX * 2 - 1);\n      dy += (hh - origin.y) * (anchorY * 2 - 1);\n\n      // If margin is already specified, add it to the new margin value.\n      dx += cached.marginLeft + cached.baseMarginLeft;\n      dy += cached.marginTop + cached.baseMarginTop;\n\n      // Set the margin to account for a lack of translation.\n      anim.styles.marginLeft = dx + 'px';\n      anim.styles.marginTop = dy + 'px';\n\n      // The array of filter operations\n      var filters = [];\n\n      // Transformations\n      if ( matrix.m11 !== 1.0 || matrix.m12 !== 0.0 || matrix.m21 !== 0.0 || matrix.m22 !== 1.0 )\n      {\n        var transformFilter = 'progid:DXImageTransform.Microsoft.Matrix(SizingMethod=\\'auto expand\\'' +\n          ', M11=' + matrix.m11 + ', M12=' + matrix.m12 +\n          ', M21=' + matrix.m21 + ', M22=' + matrix.m22 + ')';\n\n        filters.push( transformFilter );\n      }\n\n      // Opacity\n      if ( isNumber( cached.opacity ) && !isNaN( cached.opacity )  )\n      {\n        var opacityFilter = 'progid:DXImageTransform.Microsoft.Alpha(Opacity=' + ( cached.opacity * 100 ) + ')';\n\n        filters.push( opacityFilter );\n      }\n\n      // Blur\n      if ( isNumber( cached.blur ) && !isNaN( cached.blur ) )\n      {\n        var blurFilter = 'progid:DXImageTransform.Microsoft.Blur(PixelRadius=\\'' + ( cached.blur ) + 'px\\')';\n\n        filters.push( blurFilter );\n      }\n\n      // Set the filter properties!\n      anim.styles.filter = filters.join( ' ' );\n\n      // Force layout\n      anim.styles.zoom = 1;\n    }\n  };\n\n  var attributes = [\n    'marginLeft', 'marginTop',\n    'blur',\n    'opacity',\n    'origin', 'originX', 'originY',\n    'translate', 'translateX', 'translateY', 'translateZ', 'translate3d',\n    'rotate', 'rotate3d',\n    'skew', 'skewX', 'skewY',\n    'scale', 'scaleX', 'scaleY', 'scaleZ', 'scale3d'\n  ];\n\n  for ( var i = 0; i < attributes.length; i++ )\n  {\n    setProperty( attributes[ i ], 'ieTransform' );\n  }\n}\n\n/* minWidth < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.minWidth.set = function(e, anim)\n  {\n    anim.styles.width = 'expression( this.scrollWidth \\< ' + (anim.frame.minWidth + 1) + ' ? \"' + anim.frame.minWidth + anim.units.minWidth + '\" : \"auto\")';\n  };\n}\n\n/* maxWidth < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.maxWidth.set = function(e, anim)\n  {\n    anim.styles.width = 'expression( this.scrollWidth > ' + (anim.frame.maxWidth - 1) + ' ? \"' + anim.frame.maxWidth + anim.units.maxWidth + '\" : \"auto\")';\n  };\n}\n\n/* minHeight < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.minHeight.set = function(e, anim)\n  {\n    anim.styles.height = 'expression( this.scrollHeight \\< ' + (anim.frame.minHeight + 1) + ' ? \"' + anim.frame.minHeight + anim.units.minHeight + '\" : \"auto\")';\n  };\n}\n/* maxHeight < IE 8 */\nif ( browser.IE && browser.IE < 8 )\n{\n  Properties.maxHeight.set = function(e, anim)\n  {\n    anim.styles.height = 'expression( this.scrollHeight > ' + (anim.frame.maxHeight - 1) + ' ? \"' + anim.frame.maxHeight + anim.units.maxHeight + '\" : \"auto\")';\n  };\n}\n\n\n\n  // Register Factory\n  anim8.Factories['default'] = anim8.Factories['dom'] = new FactoryDom();\n\n  // Classes\n  anim8.AnimatorDom = AnimatorDom;\n  anim8.FactoryDom = FactoryDom;\n\n  // Functions\n  anim8.isElement = isElement;\n\n  // Variables\n  anim8.browser = browser;\n  anim8.Matrix = Matrix;\n\n  // Namespace\n  anim8.dom = {\n    Attributes:           Attributes,\n    attribute:            $attribute,\n    convert:              $convert,\n    style:                $style,\n    parseValue:           $parseValue,\n    property:             $property,\n    prefix:               $prefix,\n    concatenateStyle:     concatenateStyle,\n    setProperty:          setProperty,\n    unset:                unset,\n    factory:              factory,\n    factoryDerivable:     factoryDerivable,\n    factoryColor:         factoryColor\n  };\n\n  return anim8;\n\n}));\n"],"sourceRoot":"/source/"}